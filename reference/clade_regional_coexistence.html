<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence • Buccaneer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence"><meta name="description" content="This function computes the number of species (or lineages) present at the
regional scale for each time slice based on species temporal ranges. It
divides the temporal range into discrete intervals and counts how many species'
longevities (origination to extinction) overlap with each time slice. This
provides a time series of regional taxonomic richness through geological time."><meta property="og:description" content="This function computes the number of species (or lineages) present at the
regional scale for each time slice based on species temporal ranges. It
divides the temporal range into discrete intervals and counts how many species'
longevities (origination to extinction) overlap with each time slice. This
provides a time series of regional taxonomic richness through geological time."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Buccaneer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/assemblage-time-series.html">Building time series based on species coexistence</a></li>
    <li><a class="dropdown-item" href="../articles/pre-processing-data.html">pre-processing-data</a></li>
    <li><a class="dropdown-item" href="../articles/time-series-metrics.html">Time series metrics</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Regional Species Richness Across Time Slices</h1>

      <div class="d-none name"><code>clade_regional_coexistence.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes the number of species (or lineages) present at the
regional scale for each time slice based on species temporal ranges. It
divides the temporal range into discrete intervals and counts how many species'
longevities (origination to extinction) overlap with each time slice. This
provides a time series of regional taxonomic richness through geological time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clade_regional_coexistence</span><span class="op">(</span></span>
<span>  <span class="va">df.TS.TE</span>,</span>
<span>  <span class="va">time.slice</span>,</span>
<span>  round.digits <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"species"</span>,</span>
<span>  TS <span class="op">=</span> <span class="st">"TS"</span>,</span>
<span>  TE <span class="op">=</span> <span class="st">"TE"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df-ts-te">df.TS.TE<a class="anchor" aria-label="anchor" href="#arg-df-ts-te"></a></dt>
<dd><p>A data frame containing species temporal data with at least
three columns: species names, origination times (TS), and extinction
times (TE). Each row represents one species with its temporal range.</p></dd>


<dt id="arg-time-slice">time.slice<a class="anchor" aria-label="anchor" href="#arg-time-slice"></a></dt>
<dd><p>Numeric. The time interval (in the same units as TS and TE)
between consecutive time slices. Negative values will create backwards
intervals from maximum TS to minimum TE.</p></dd>


<dt id="arg-round-digits">round.digits<a class="anchor" aria-label="anchor" href="#arg-round-digits"></a></dt>
<dd><p>Integer. The number of decimal places to round time slice
values. Default is 1. This affects the precision of temporal binning.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Character. The name of the column in <code>df.TS.TE</code> containing
species identifiers. Default is "species".</p></dd>


<dt id="arg-ts">TS<a class="anchor" aria-label="anchor" href="#arg-ts"></a></dt>
<dd><p>Character. The name of the column in <code>df.TS.TE</code> containing
origination (first appearance) times for each species. Default is "TS".</p></dd>


<dt id="arg-te">TE<a class="anchor" aria-label="anchor" href="#arg-te"></a></dt>
<dd><p>Character. The name of the column in <code>df.TS.TE</code> containing
extinction (last appearance) times for each species. Default is "TE".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with two columns:</p>
<dl><dt>coexistence</dt>
<dd><p>Numeric. The number of species present (coexisting) in
each time slice at the regional scale.</p></dd>

<dt>time.slice</dt>
<dd><p>Numeric. The time point representing each slice, typically
the upper (older) boundary of the time bin.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps:</p><ol><li><p>Creates a sequence of time slices from the maximum TS to minimum TE</p></li>
<li><p>Generates regional co-occurrence matrices using <code><a href="aux_matrix_regional_coex.html">aux_matrix_regional_coex()</a></code></p></li>
<li><p>For each time slice, identifies species whose temporal ranges overlap
with that interval (TS &gt;= time slice AND TE &lt;= time slice)</p></li>
<li><p>Counts the number of overlapping species (richness) for each time slice</p></li>
</ol><p>The term "coexistence" refers to the number of species whose temporal ranges
overlap with each time slice, representing standing diversity at the regional
scale. This is equivalent to species richness through time when all species
in the region are considered.</p>
<p>Note: This function calculates richness at the regional (pool) scale, not
at individual sites. For site-level or assemblage-level richness, see
<code><a href="Assemblage_regional_richness.html">Assemblage_regional_richness()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create example fossil data with temporal ranges</span></span></span>
<span class="r-in"><span><span class="va">df_longevities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp1"</span>, <span class="st">"sp2"</span>, <span class="st">"sp3"</span>, <span class="st">"sp4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  TS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">98</span>, <span class="fl">98</span>, <span class="fl">85</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  TE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">45</span>, <span class="fl">40</span>, <span class="fl">35</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate regional richness through time with 5 Ma time slices</span></span></span>
<span class="r-in"><span><span class="va">res_regional_coexistence</span> <span class="op">&lt;-</span> <span class="fu">clade_regional_coexistence</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.TS.TE <span class="op">=</span> <span class="va">df_longevities</span>,</span></span>
<span class="r-in"><span>  time.slice <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  round.digits <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_regional_coexistence</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   coexistence time.slice</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           1        100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           3         95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           3         90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           4         85</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           4         80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           4         75</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot richness through time</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res_regional_coexistence</span><span class="op">$</span><span class="va">time.slice</span>,</span></span>
<span class="r-in"><span>     <span class="va">res_regional_coexistence</span><span class="op">$</span><span class="va">coexistence</span>,</span></span>
<span class="r-in"><span>     type <span class="op">=</span> <span class="st">"l"</span>,</span></span>
<span class="r-in"><span>     xlab <span class="op">=</span> <span class="st">"Time (Ma)"</span>,</span></span>
<span class="r-in"><span>     ylab <span class="op">=</span> <span class="st">"Regional Species Richness"</span>,</span></span>
<span class="r-in"><span>     main <span class="op">=</span> <span class="st">"Species Richness Through Time"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="clade_regional_coexistence-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using custom column names</span></span></span>
<span class="r-in"><span><span class="va">df_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp1"</span>, <span class="st">"sp2"</span>, <span class="st">"sp3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  first_appearance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">95</span>, <span class="fl">90</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  last_appearance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">55</span>, <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">res_custom</span> <span class="op">&lt;-</span> <span class="fu">clade_regional_coexistence</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.TS.TE <span class="op">=</span> <span class="va">df_custom</span>,</span></span>
<span class="r-in"><span>  time.slice <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"taxon"</span>,</span></span>
<span class="r-in"><span>  TS <span class="op">=</span> <span class="st">"first_appearance"</span>,</span></span>
<span class="r-in"><span>  TE <span class="op">=</span> <span class="st">"last_appearance"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

