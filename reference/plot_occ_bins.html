<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins • Buccaneer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins"><meta name="description" content="This function creates a visualization of fossil occurrence records showing
the temporal distribution of species across geological time. Each species is
represented by horizontal line segments spanning from maximum (oldest) to
minimum (youngest) ages for each occurrence record. The plot can optionally
color-code species by number of occurrences and overlay geological time scale
boundaries."><meta property="og:description" content="This function creates a visualization of fossil occurrence records showing
the temporal distribution of species across geological time. Each species is
represented by horizontal line segments spanning from maximum (oldest) to
minimum (youngest) ages for each occurrence record. The plot can optionally
color-code species by number of occurrences and overlay geological time scale
boundaries."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Buccaneer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/assemblage-time-series.html">Building time series based on species coexistence</a></li>
    <li><a class="dropdown-item" href="../articles/pre-processing-data.html">pre-processing-data</a></li>
    <li><a class="dropdown-item" href="../articles/time-series-metrics.html">Time series metrics</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot Fossil Occurrence Records and Species Age Ranges</h1>

      <div class="d-none name"><code>plot_occ_bins.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a visualization of fossil occurrence records showing
the temporal distribution of species across geological time. Each species is
represented by horizontal line segments spanning from maximum (oldest) to
minimum (youngest) ages for each occurrence record. The plot can optionally
color-code species by number of occurrences and overlay geological time scale
boundaries.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_occ_bins</span><span class="op">(</span></span>
<span>  <span class="va">df.occ.fossil</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"accepted_name"</span>,</span>
<span>  max.age <span class="op">=</span> <span class="st">"max_ma"</span>,</span>
<span>  min.age <span class="op">=</span> <span class="st">"min_ma"</span>,</span>
<span>  occ.gradient <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  name.scale.occ <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>  x.axis.name <span class="op">=</span> <span class="st">"age range"</span>,</span>
<span>  y.axis.name <span class="op">=</span> <span class="st">"species.name"</span>,</span>
<span>  show.species.name <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  age.scheme <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df-occ-fossil">df.occ.fossil<a class="anchor" aria-label="anchor" href="#arg-df-occ-fossil"></a></dt>
<dd><p>A data frame containing fossil occurrence records with at
least three columns: species names, maximum (oldest) age estimates, and
minimum (youngest) age estimates. Each row represents a single occurrence
record with age uncertainty.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Character. The name of the column in <code>df.occ.fossil</code>
containing species identifiers. Default is "accepted_name".</p></dd>


<dt id="arg-max-age">max.age<a class="anchor" aria-label="anchor" href="#arg-max-age"></a></dt>
<dd><p>Character. The name of the column in <code>df.occ.fossil</code>
containing the maximum (oldest) age estimate for each occurrence record.
Default is "max_ma".</p></dd>


<dt id="arg-min-age">min.age<a class="anchor" aria-label="anchor" href="#arg-min-age"></a></dt>
<dd><p>Character. The name of the column in <code>df.occ.fossil</code>
containing the minimum (youngest) age estimate for each occurrence record.
Default is "min_ma".</p></dd>


<dt id="arg-occ-gradient">occ.gradient<a class="anchor" aria-label="anchor" href="#arg-occ-gradient"></a></dt>
<dd><p>Logical. Should line segments be colored by the number of
occurrences for each species? If TRUE (default), species with more occurrence
records will have different colors based on the chosen color scale.</p></dd>


<dt id="arg-log">log<a class="anchor" aria-label="anchor" href="#arg-log"></a></dt>
<dd><p>Logical. Should the number of occurrences be log-transformed for
color scaling? Default is TRUE. This can help visualize species with highly
variable occurrence counts.</p></dd>


<dt id="arg-name-scale-occ">name.scale.occ<a class="anchor" aria-label="anchor" href="#arg-name-scale-occ"></a></dt>
<dd><p>Character. The name of the viridis color scale to use
for coloring by occurrence count. Options include "viridis" (default),
"magma", "plasma", "inferno", "cividis", "mako", "rocket", and "turbo".</p></dd>


<dt id="arg-x-axis-name">x.axis.name<a class="anchor" aria-label="anchor" href="#arg-x-axis-name"></a></dt>
<dd><p>Character. Label for the x-axis. Default is "age range".</p></dd>


<dt id="arg-y-axis-name">y.axis.name<a class="anchor" aria-label="anchor" href="#arg-y-axis-name"></a></dt>
<dd><p>Character. Label for the y-axis. Default is "species.name".</p></dd>


<dt id="arg-show-species-name">show.species.name<a class="anchor" aria-label="anchor" href="#arg-show-species-name"></a></dt>
<dd><p>Logical. Should species names be displayed on the
y-axis? Default is FALSE. When FALSE, y-axis labels are hidden to reduce
clutter when plotting many species.</p></dd>


<dt id="arg-age-scheme">age.scheme<a class="anchor" aria-label="anchor" href="#arg-age-scheme"></a></dt>
<dd><p>Logical. Should geological time period boundaries be overlaid
as vertical dashed lines? Default is TRUE. Currently uses North American
Land Mammal Ages (NALMAs) boundaries.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot2 object displaying the occurrence records. Species are arranged
vertically (y-axis) sorted by their maximum age, with time (age) on the
reversed x-axis (oldest to the left, youngest to the right). Each horizontal
segment represents one occurrence record spanning its age uncertainty.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following visualization steps:</p><ol><li><p>Orders species by their oldest occurrence (maximum age)</p></li>
<li><p>Counts the number of occurrence records per species</p></li>
<li><p>Optionally log-transforms occurrence counts for better visualization</p></li>
<li><p>Creates horizontal segments for each occurrence spanning min to max age</p></li>
<li><p>Colors segments by occurrence count using viridis color scales</p></li>
<li><p>Optionally overlays geological time boundaries</p></li>
</ol><p>Visualization features:</p><ul><li><p><strong>X-axis</strong>: Time in millions of years (Ma), reversed so older
ages appear on the left</p></li>
<li><p><strong>Y-axis</strong>: Species names (ordered by first appearance)</p></li>
<li><p><strong>Color gradient</strong>: Number of occurrences per species (with or
without log transformation)</p></li>
<li><p><strong>Vertical lines</strong>: Geological time period boundaries (if enabled)</p></li>
</ul><p>The default geological time scheme uses North American Land Mammal Ages (NALMAs)
boundaries. To use custom time boundaries, set <code>age.scheme = FALSE</code> and
modify the returned ggplot object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create example fossil occurrence data</span></span></span>
<span class="r-in"><span><span class="va">df_fossils</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  accepted_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp1"</span>, <span class="st">"sp2"</span>, <span class="st">"sp3"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  max_ma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">95</span>, <span class="fl">90</span>, <span class="fl">85</span>, <span class="fl">80</span>, <span class="fl">75</span>, <span class="fl">70</span>, <span class="fl">65</span>, <span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  min_ma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95</span>, <span class="fl">90</span>, <span class="fl">85</span>, <span class="fl">80</span>, <span class="fl">75</span>, <span class="fl">70</span>, <span class="fl">65</span>, <span class="fl">60</span>, <span class="fl">55</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic plot with default settings</span></span></span>
<span class="r-in"><span><span class="fu">plot_occ_bins</span><span class="op">(</span>df.occ.fossil <span class="op">=</span> <span class="va">df_fossils</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot with species names visible</span></span></span>
<span class="r-in"><span><span class="fu">plot_occ_bins</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.occ.fossil <span class="op">=</span> <span class="va">df_fossils</span>,</span></span>
<span class="r-in"><span>  show.species.name <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot without log transformation of occurrence counts</span></span></span>
<span class="r-in"><span><span class="fu">plot_occ_bins</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.occ.fossil <span class="op">=</span> <span class="va">df_fossils</span>,</span></span>
<span class="r-in"><span>  log <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot without geological time boundaries</span></span></span>
<span class="r-in"><span><span class="fu">plot_occ_bins</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.occ.fossil <span class="op">=</span> <span class="va">df_fossils</span>,</span></span>
<span class="r-in"><span>  age.scheme <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use different color scale</span></span></span>
<span class="r-in"><span><span class="fu">plot_occ_bins</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.occ.fossil <span class="op">=</span> <span class="va">df_fossils</span>,</span></span>
<span class="r-in"><span>  name.scale.occ <span class="op">=</span> <span class="st">"plasma"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Customize the plot further</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">plot_occ_bins</span><span class="op">(</span>df.occ.fossil <span class="op">=</span> <span class="va">df_fossils</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Fossil Occurrences Through Time"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use custom column names</span></span></span>
<span class="r-in"><span><span class="va">df_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp1"</span>, <span class="st">"sp2"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  oldest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">95</span>, <span class="fl">90</span>, <span class="fl">85</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  youngest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95</span>, <span class="fl">90</span>, <span class="fl">85</span>, <span class="fl">80</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">plot_occ_bins</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df.occ.fossil <span class="op">=</span> <span class="va">df_custom</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"taxon"</span>,</span></span>
<span class="r-in"><span>  max.age <span class="op">=</span> <span class="st">"oldest"</span>,</span></span>
<span class="r-in"><span>  min.age <span class="op">=</span> <span class="st">"youngest"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

