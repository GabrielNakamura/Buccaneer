[{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/assemblage-time-series.html","id":"assemblage-regional-richness","dir":"Articles","previous_headings":"","what":"Assemblage regional richness","title":"Building time series based on species coexistence","text":"plotting time series based mean assemblage regional richness can plot grid values different time slices summary metric considering time slices can also plot variance richness time Plotting together","code":"df_assemblage_reg_richness <-    Assemblage_regional_richness(df.TS.TE = df_TS_TE_faurby,                                df.occ = df_occ_faurby,                                 time.slice = 0.1,                                 grid.size = 5,                                round.digits = 1,                                species = \"species\",                                TS = \"TS\",                                TE = \"TE\",                                Max.age = \"Max.age\",                                Min.age = \"Min.age\",                                 lat = \"lat\",                                 lon = \"lng\",                                 crs = 4326) df_assemblage_timeseries_richness <- df_assemblage_reg_richness$time_series_rich  df_assemblage_timeseries_richness |>    ggplot(aes(x = time.slice, y = mean.rich.by.grid.slice)) +  # Line thickness for better visibility   geom_point(aes(x = time.slice, y = mean.rich.by.grid.slice)) +   geom_smooth(se = TRUE, method = \"loess\", size = 1) +   labs(title = \"\",        x = \"Time\",        y = \"Mean species richness assemblage\") +   theme_minimal()  +   scale_x_continuous(breaks = seq(max(df_assemblage_timeseries_richness$time.slice), 0, by = -10)) +   scale_x_reverse() +   theme(legend.position = \"none\")# Use a clean theme df_assemblage_grid_richness <- df_assemblage_reg_richness$grid_mean_age  continents <- rnaturalearth::ne_coastline(scale = \"medium\", returnclass = \"sf\") sf_mean_site <- sf::st_transform(df_assemblage_grid_richness, crs = \"+proj=moll +x_0=0 +y_0=0 +lat_0=0 +lon_0=0\") continents <- sf::st_transform(continents, crs = \"+proj=moll +x_0=0 +y_0=0 +lat_0=0 +lon_0=0\")  map_rich_grid <-    ggplot() +   geom_sf(data = sf_mean_site, aes(geometry = geometry, fill = mean.age.grid),           color = \"white\") +  # Your data   geom_sf(data = continents, fill = NA, color = \"black\") +  # Continent boundaries   rcartocolor::scale_fill_carto_c(name = \"Richness\", type = \"quantitative\", palette = \"SunsetDark\") +  # Optional: Use a color scale   theme_bw() +   labs(title = \"\",        fill = \"Mean mpd by site\") +   theme(     axis.text = element_blank(),       axis.ticks = element_blank(),     axis.line = element_blank()   ) map_var_grid <-    ggplot() +   geom_sf(data = sf_mean_site, aes(geometry = geometry, fill = var.age.grid),           color = \"white\") +  # Your data   geom_sf(data = continents, fill = NA, color = \"black\") +  # Continent boundaries   rcartocolor::scale_fill_carto_c(name = \"Richness variance\", type = \"quantitative\", palette = \"SunsetDark\") +  # Optional: Use a color scale   theme_bw() +   labs(title = \"\",        fill = \"richness variance\") +   theme(     axis.text = element_blank(),       axis.ticks = element_blank(),     axis.line = element_blank()   ) library(patchwork) map_grid_rich_var <-    map_rich_grid + map_var_grid +   plot_layout(nrow = 2) map_grid_rich_var"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/assemblage-time-series.html","id":"assemblage-regional-mpd","dir":"Articles","previous_headings":"","what":"Assemblage regional mpd","title":"Building time series based on species coexistence","text":"plotting mpd assemblage","code":"df_assemblage_reg_mpd <-    Assemblage_regional_mpd(df.TS.TE = df_TS_TE_mass,                         df.occ = df_occ_faurby,                          time.slice = 0.1,                          grid.size = 5,                          trait = \"mean.size\",                          round.digits = 1,                         species = \"species\",                          TS = \"TS\",                          TE = \"TE\",                         Max.age = \"Max.age\",                         Min.age = \"Min.age\",                          lat = \"lat\",                         lon = \"lng\",                         crs = 4326) df_assemblage_reg_mpd2 <-    df_assemblage_reg_mpd$mean_mpd_timeslice  df_assemblage_reg_mpd2 |>    ggplot(aes(x = time.slice, y = mean.mpd)) +  # Line thickness for better visibility   geom_point(aes(x = time.slice, y = mean.mpd)) +   geom_smooth(se = TRUE, method = \"loess\", size = 1) +   labs(title = \"\",        x = \"Time\",        y = \"Mean mpd assemblage\") +   theme_minimal()  +   scale_x_continuous(breaks = seq(max(df_assemblage_reg_richness$time_series_rich$time.slice), 0, by = -10)) +   scale_x_reverse() +   theme(legend.position = \"none\") # Use a clean theme"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/assemblage-time-series.html","id":"mapping-diversity-in-space","dir":"Articles","previous_headings":"","what":"Mapping diversity in space","title":"Building time series based on species coexistence","text":"map richness mpd space time","code":"# plotting in a map  sf_mean_site <- sf::st_as_sf(df_assemblage_reg_mpd$mean_mpd_grid)   continents <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\") sf_mean_site2 <- sf::st_transform(sf_mean_site, crs = \"+proj=moll +x_0=0 +y_0=0 +lat_0=0 +lon_0=0\") continents <- sf::st_transform(continents, crs = \"+proj=moll +x_0=0 +y_0=0 +lat_0=0 +lon_0=0\")   ggplot() +   geom_sf(data = sf_mean_site2, aes(geometry = geometry, fill = grid.mean),           color = \"white\") +  # Your data   geom_sf(data = continents, fill = NA, color = \"black\") +  # Continent boundaries   rcartocolor::scale_fill_carto_c(name = \"MPD\", type = \"quantitative\", palette = \"SunsetDark\") +  # Optional: Use a color scale   theme_bw() +   labs(title = \"\",        fill = \"Mean mpd by site\") +   theme(     axis.text = element_blank(),       axis.ticks = element_blank(),     axis.line = element_blank()   )"},{"path":[]},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/pre-processing-data.html","id":"background","dir":"Articles","previous_headings":"","what":"Background","title":"pre-processing-data","text":"tutorial present data longevity fossil occurrence can used investigate imprints species competition different levels. done help new R package Buccaneer","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/pre-processing-data.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"pre-processing-data","text":"use data Faurby et al (2024) demonstrate new Buccaneer R package can used processing data analysis. data contains information fossil data extant extinct species mammalian carnivores related extinct groups (Carnivoramorpha, Hyaenodonta Oxyaenidae)retrieved Paleobiology Database New Old Worlds database.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/pre-processing-data.html","id":"loading-data","dir":"Articles","previous_headings":"","what":"Loading data","title":"pre-processing-data","text":"","code":"library(dplyr) df.faurby <- read.csv(here::here(\"data\", \"data_faurby.csv\"), sep = \";\") # dataset from https://royalsocietypublishing.org/doi/10.1098/rspb.2024.0473 df.body.mass <- read.csv(here::here(\"data\", \"Inferred_Size_Carnivoramorpha.csv\"), sep = \",\") # dataset from https://royalsocietypublishing.org/doi/10.1098/rspb.2024.0473 taxonomic_placement <- read.csv(here::here(\"data\", \"taxonomic_placement.csv\"), sep = \";\")"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/pre-processing-data.html","id":"general-cleaning-and-processing","dir":"Articles","previous_headings":"","what":"General cleaning and processing","title":"pre-processing-data","text":"filter original data keeping Carnivora species suborders Caniformia Feliformia records Eurasia Keeping site ID PBDB. use NOW ID PBDB absent Processing data body mass calculating mean value species","code":"taxonomic_placement2 <-    taxonomic_placement |>    filter(Suborder == \"Caniformia\" | Suborder == \"Feliformia\")   # adding a new column with genus and species to taxonomic placement and occurrence records taxonomic_placement2$genus.species <- paste(taxonomic_placement2$Genus, taxonomic_placement2$Species, sep = \"_\") df.faurby$genus.species <- paste(df.faurby$Genus, df.faurby$Species, sep = \"_\")   df.faurby2 <-    taxonomic_placement2 |>    left_join(df.faurby, by = c(genus.species = \"genus.species\")) |>    select(-Family.y, -Genus.y, -Species.y) |>    rename(Family = Family.x, Genus = Genus.x, Species = Species.x)  # keeping only Europe and NA df.faurby3 <-    df.faurby2 |>    filter(Continent == \"Europe\" | Continent == \"Asia\")   df.faurby3 <-    df.faurby2 |>    filter(Continent == \"Europe\") df.faurby4 <-    df.faurby3 |>    mutate(site = ifelse(is.na(PBDB_ID), NOW_ID, PBDB_ID)) df_body_mass <-    df.body.mass |>    group_by(Genus) |>    summarise(mean.size = mean(Size_Est))"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/pre-processing-data.html","id":"processing-and-flagging-data-with-buccaneer","dir":"Articles","previous_headings":"","what":"Processing and flagging data with Buccaneer","title":"pre-processing-data","text":"use function clean_occ_fossil make simple data cleaning, processing flagging occurrence records. example remove record NA columns flag records maximum minimum age range greater 5 myr, calculate midpoint age, time origination (TS) time extinction (TE)","code":"df_occ_faurby <-    clean_occ_fossil(df.occ.fossil = df.faurby4,                   method.ages = \"midpoint\",                  thresh.age.range = 5,                   species = \"Genus\",                  Max.age = \"Maximum_Age\",                  Min.age = \"Minimum_Age\",                   site = \"site\",                  lat = \"Latitude\",                  lng = \"Longitude\",                  remove.sub.species = TRUE,                   comp.TS.TE = TRUE,                   group = \"Suborder\") df_occ_faurby <-    df_occ_faurby |>    filter(species != \"Delete\")  # filtering TS and TE per species  df_TS_TE_faurby <-    df_occ_faurby |>    dplyr::distinct(species, .keep_all = T)  # joining TS and TE with body mass  df_TS_TE_mass <-    df_body_mass |>    left_join(df_TS_TE_faurby, by = c(Genus = \"species\")) |>    rename(species = \"Genus\") |>    filter(!is.na(TS) & !is.na(TE)) |>    filter(!is.na(site))  # creating time intervals (bins)  bins <- seq(from = max(df_occ_faurby$Max.age), to = min(df_occ_faurby$Min.age), by = -5)"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"background","dir":"Articles","previous_headings":"","what":"Background","title":"Time series metrics","text":"article show calculate different metrics interspecific competition (sometimes coexistence metrics) different taxonomic levels deep time using {Buccaneer} R package. metrics use data Graciotti et al. (2025). comprises fossil record North American canids, group well caracterized ecologically regarding fossil record. data part {Buccaneer} package comprised : Species longevity data: data frame describing Origination Time (TS) Extinction Time (TE) obtained Bayesian framework called PyRate Occurrence recorda data: Species traits:","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"loading-data-and-packages","dir":"Articles","previous_headings":"","what":"Loading data and packages","title":"Time series metrics","text":"","code":"data(\"df_longevities_canidae\") # longevities for one replicate #data(\"occurrences_canidae\") # occurrence data data(\"traits_canidae\") # trait data data(\"df_occ_canidae\") # occurrence data"},{"path":[]},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"regional-scale","dir":"Articles","previous_headings":"Interspecific competition at clade level","what":"Regional scale","title":"Time series metrics","text":"Calculating time series clade level regional scale calculate mean distances using general function allows set group comparison mean calculate. can calculate mean distances focal target group within calculate mean trait distance within focal group. end use diet_cat column trait_canidae data frame, contains classification canidae species two categories: hypercarnivores mesocarnivores. First need join information df_longvities_canidae data frame function also general solution calculate mean trait distance using different number species/genus close . set number closest species used calculation mean pairwise distances change argument nearest.taxon. 1 equivalent mean nearest distance corresponds calculation mean pairwise distance (mpd) using coexisting species. next chunk code show example can calculate mean distances morphospace using different types comparisons varying number closest species morphospace considered calculation Let’s check results two competition metrics. First need join results plot one graphic Plotting results","code":"res_clade_regional <-   clade_regional_coexistence(df.TS.TE = df_longevities_canidae,                              time.slice = 0.1,                              round.digits = 10,                              species = \"species\",                              TS = \"TS\",                              TE = \"TE\") df_longevities_canidae_trait <-    df_longevities_canidae |>    left_join(traits_canidae, by = \"species\") dist_body_mass <- dist(traits_canidae$LD1) # computing pairwise distance matrix for body mass  # distances between groups using diet category  res_regional_mnd_between <-    clade_regional_distance(df.TS.TE = df_longevities_canidae_trait,                            time.slice = 0.1,                           dist.trait = dist_body_mass,                           nearest.taxon = 1,                            round.digits = 1,                            species = \"species\",                            TS = \"TS\",                            TE = \"TE\",                            group = \"diet_cat\",                           group.focal.compare = c(\"meso\", \"hyper\"),                           type.comparison = \"between\")   # distance in morphospace computed within the focal group, in this case is mesocarnivores res_regional_mnd_within <-    clade_regional_distance(df.TS.TE = df_longevities_canidae_trait,                            time.slice = 0.1,                           dist.trait = dist_body_mass,                           nearest.taxon = 1,                            round.digits = 1,                            species = \"species\",                            TS = \"TS\",                            TE = \"TE\",                            group = \"diet_cat\",                            group.focal.compare = c(\"meso\", \"meso\"),                            type.comparison = \"within\") all_mnd_regional <- rbind(res_regional_mnd_between, res_regional_mnd_within) all_mnd_regional2 <-    data.frame(all_mnd_regional,               group_res = rep(c(\"Between\", \"Within\"),                               each = nrow(regional_mnd_within))   ) res_clade_regional |>   mutate(time.slice = as.numeric(time.slice)) |>   ggplot(aes(x = time.slice, y = coexistence)) +   geom_smooth(     se = TRUE,     method = \"loess\",     linewidth = 0.6   ) +   geom_line(     linewidth = 0.4   ) +   labs(     x = \"Time (Ma)\",     y = \"Coexistence\"   ) +   scale_x_reverse(     breaks = seq(       from = 0,       to   = max(res_clade_regional$time.slice, na.rm = TRUE),       by   = 5     )   ) +   theme_minimal(base_size = 10) +   theme(     legend.position = \"none\",     axis.line = element_line(color = \"black\", linewidth = 0.4),     axis.title = element_text(size = 9),     axis.text  = element_text(size = 7),     axis.title.x = element_text(size = 9),     axis.title.y = element_text(size = 9),     panel.grid.minor = element_blank()   )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"site-scale","dir":"Articles","previous_headings":"Interspecific competition at clade level","what":"Site scale","title":"Time series metrics","text":"Plotting results can also calculate distance morphospace using site criteria Let’s check results competition metrics. First need join results plot one graphic Plotting results","code":"res_clade_site <-    clade_site_coexistence(df.TS.TE = df_longevities_canidae,                           df.occ = df_occ_canidae,                           time.slice = 0.1,                           round.digits = 1,                          species = \"species\",                          TS = \"TS\",                          TE = \"TE\",                           Max.age = \"max_T\",                          Min.age = \"min_T\",                          site = \"site.char\") res_clade_site |>    ggplot(aes(x = as.numeric(time.slice), y = mean.coexistence)) +   geom_line(aes(x = as.numeric(time.slice), y = mean.coexistence)) +   geom_smooth(se = TRUE, method = \"loess\", size = 1) +  # Line thickness for better visibility   labs(title = \"\",        x = \"Time (Ma)\",        y = \"Mean site coexistence\") +   scale_x_continuous(breaks = seq(max(as.numeric(res_clade_site$time.slice)), 0, by = -10)) +   scale_x_reverse() +   theme_minimal(base_size = 10) +   theme(     legend.position = \"none\",     axis.line = element_line(color = \"black\", linewidth = 0.4),     axis.title = element_text(size = 9),     axis.text  = element_text(size = 7),     axis.title.x = element_text(size = 9),     axis.title.y = element_text(size = 9),     panel.grid.minor = element_blank()   ) res_clade_site_distance <-    clade_site_distance(df.TS.TE = df_longevities_canidae,                        df.occ = df_occ_canidae,                        time.slice = 0.1,                        round.digits = 1,                       dist.trait = dist_body_mass,                        nearest.taxon = 1,                       species = \"species\",                       TS = \"TS\",                       TE = \"TE\",                        Max.age = \"max_T\",                       Min.age = \"min_T\",                       site = \"site.char\")  # calculating between mesocarnivores and hypercarnivores species res_clade_site_distance_between <-    clade_site_distance(df.TS.TE = df_longevities_canidae_trait,                        df.occ = df_occ_canidae,                        time.slice = 0.1,                        round.digits = 1,                       dist.trait = dist_body_mass,                        nearest.taxon = 1,                        group = \"diet_cat\",                        group.focal.compare = c(\"meso\", \"hyper\"),                        type.comparison = \"between\",                       species = \"species\",                       TS = \"TS\",                       TE = \"TE\",                        Max.age = \"max_T\",                       Min.age = \"min_T\",                       site = \"site.char\")  # calculating within mesocarnivore species res_clade_site_distance_within <-    clade_site_distance(df.TS.TE = df_longevities_canidae_trait,                        df.occ = df_occ_canidae,                        time.slice = 0.1,                        round.digits = 1,                       dist.trait = dist_body_mass,                        nearest.taxon = 1,                        group = \"diet_cat\",                        group.focal.compare = c(\"meso\", \"meso\"),                        type.comparison = \"within\",                       species = \"species\",                       TS = \"TS\",                       TE = \"TE\",                        Max.age = \"max_T\",                       Min.age = \"min_T\",                       site = \"site.char\") all_mnd_site <- rbind(res_clade_site_distance, res_clade_site_distance_between, res_clade_site_distance_within) all_mnd_site2 <-    data.frame(all_mnd_site,               group_res = rep(c(\"All\", \"Between\", \"Within\"),                               each = nrow(res_clade_site_distance))   ) all_mnd_site2 |>    ggplot(aes(x = as.numeric(time.slice), y = mean.distance, group = group_res, color = group_res)) +   geom_line(aes(x = as.numeric(time.slice), y = mean.distance)) +   geom_smooth(se = TRUE, method = \"loess\", size = 0.5) +   labs(title = \"\",        x = \"Time (Ma)\",        y = \"Mean Nearest Distance\",        color = \"Groups\") +   scale_x_continuous(breaks = seq(max(as.numeric(all_mnd_site2$time.slice)), 0, by = -10)) +   scale_x_reverse() +   theme_minimal(base_size = 10) +   theme(     axis.line = element_line(color = \"black\", linewidth = 0.4),     axis.title = element_text(size = 9),     axis.text  = element_text(size = 7),     axis.title.x = element_text(size = 9),     axis.title.y = element_text(size = 9),     panel.grid.minor = element_blank()   )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"reach-criteria","dir":"Articles","previous_headings":"Interspecific competition at clade level","what":"Reach criteria","title":"Time series metrics","text":"Reach criteria coexistence Reach criteria mean trait distance metrics Joining results plotting Plotting","code":"res_clade_reach_coexistence <-    clade_reach_coexistence(df.TS.TE = df_longevities_canidae,                           df.occ = df_occ_canidae,                            time.slice = 0.1,                            round.digits = 5,                           species = \"species\",                           TS = \"TS\",                           TE = \"TE\",                           lat = \"lat\",                           lon = \"lng\",                           Max.age = \"max_T\",                           Min.age = \"min_T\",                           crs = 4326) res_clade_reach_distance <-    clade_reach_distance(df.TS.TE = df_longevities_canidae,                        df.occ = df_occ_canidae,                         time.slice = 0.1,                         dist.trait = dist_body_mass,                         nearest.taxon = 1,                        round.digits = 5,                         species = \"species\",                         TS = \"TS\",                        TE = \"TE\",                        lat = \"lat\",                        lon = \"lng\",                        Max.age = \"max_T\",                        Min.age = \"min_T\",                        crs = 4326)  res_clade_reach_distance_between <-    clade_reach_distance(df.TS.TE = df_longevities_canidae_trait,                        df.occ = df_occ_canidae,                         time.slice = 0.1,                         group = \"diet_cat\",                        group.focal.compare = c(\"meso\", \"hyper\"),                        type.comparison = \"between\",                         dist.trait = dist_body_mass,                         nearest.taxon = 1,                        round.digits = 5,                         species = \"species\",                         TS = \"TS\",                        TE = \"TE\",                        lat = \"lat\",                        lon = \"lng\",                        Max.age = \"max_T\",                        Min.age = \"min_T\",                        crs = 4326)  res_clade_reach_distance_within <-    clade_reach_distance(df.TS.TE = df_longevities_canidae_trait,                        df.occ = df_occ_canidae,                         time.slice = 0.1,                         group = \"diet_cat\",                        group.focal.compare = c(\"meso\", \"hyper\"),                        type.comparison = \"within\",                         dist.trait = dist_body_mass,                         nearest.taxon = 1,                        round.digits = 5,                         species = \"species\",                         TS = \"TS\",                        TE = \"TE\",                        lat = \"lat\",                        lon = \"lng\",                        Max.age = \"max_T\",                        Min.age = \"min_T\",                        crs = 4326) all_mnd_clade_reach <- rbind(res_clade_reach_distance, res_clade_reach_distance_between, res_clade_reach_distance_within) all_mnd_clade_reach2 <-    data.frame(all_mnd_clade_reach,               group_res = rep(c(\"All\", \"Between\", \"Within\"),                               each = nrow(res_clade_reach_distance))   ) all_mnd_clade_reach2 |>    ggplot(aes(x = as.numeric(time.slice), y = mean.distance, group = group_res, color = group_res)) +   geom_line(aes(x = as.numeric(time.slice), y = mean.distance)) +   geom_smooth(se = TRUE, method = \"loess\", size = 0.5) +   labs(title = \"\",        x = \"Time (Ma)\",        y = \"Mean Nearest Distance\",        color = \"Groups\") +   scale_x_continuous(breaks = seq(max(as.numeric(all_mnd_clade_reach2$time.slice)), 0, by = -10)) +   scale_x_reverse() +   theme_minimal(base_size = 10) +   theme(     axis.line = element_line(color = \"black\", linewidth = 0.4),     axis.title = element_text(size = 9),     axis.text  = element_text(size = 7),     axis.title.x = element_text(size = 9),     axis.title.y = element_text(size = 9),     panel.grid.minor = element_blank()   )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"individual-species-analysis","dir":"Articles","previous_headings":"","what":"Individual species analysis","title":"Time series metrics","text":"individual species analyses focus “perception” individual species co-occurring species. two main components module. first computes number species given species co-occur. mean distance focal individual co-occurring species. modules four spatial levels compute metrics. regional level, calculates number co-occurrence focal species species occurrence data specified time-slice. site level, compute taxonomic trait metrics considering co-existing species present occurrence site (usually defined accordingly PBDB definition site, another definition provided user). reach level, considers proxy species dispersal capacity infer species potentially co-occurr. Finally, assemblage level, considers species co-occurring occurrence record assemblage, last defined grid customized size.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"regional-scale-1","dir":"Articles","previous_headings":"Individual species analysis","what":"Regional scale","title":"Time series metrics","text":"can plot time series species can also plot individual species mpd species coexisting regional context. also use data body mass species. different ways mpd can calculated. can calculate using single trait combination traits. later require distance trait matrix (passed dist argument) containing pairwise distances among species. show calculate mpd using single trait, case body mass. Plotting results individual species mpd order calculate mpd multiple traits user must inform object class dist containing pairwise distances among species. function can handle distances different ways. can use pairwise distances obtain mpd, user can inform throught argument nearest.taxon number nearest species used calculate mpd. default calculating mpd considering species co-occurring time slice.","code":"res_indiv_species_coex <-    IndivSpecies_regional_coex(df.TS.TE = df_longevities_canidae,                               time.slice = 0.1,                              round.digits = 1,                              species = \"species\",                              TS = \"TS\",                              TE = \"TE\") res_indiv_species_coex |>   filter(     species %in% c(       \"Aelurodon_ferox\",       \"Psalidocyon_marianae\",       \"Aelurodon_taxoides\",       \"Phlaocyon_marslandensis\"     )   ) |>   ggplot(     aes(       x = time.slice,       y = n.coexistence,       color = species,       group = species     )   ) +   geom_smooth(     se = TRUE,     method = \"loess\",     linewidth = 0.8   ) +   geom_line(     linewidth = 0.5   ) +   facet_wrap(~ species, nrow = 2) +   labs(     x = \"Time\",     y = \"Number of coexistences by species\"   ) +   scale_x_reverse(     breaks = seq(       from = 0,       to   = max(res_indiv_species_coex$time.slice, na.rm = TRUE),       by   = 10     )   ) +   coord_cartesian(clip = \"off\") +   theme_minimal(base_size = 10) +     theme(     legend.position = \"none\",     axis.line.x.bottom = element_line(color = \"black\", linewidth = 0.4),     axis.ticks.x       = element_line(color = \"black\", linewidth = 0.4),     axis.text.x        = element_text(size = 8),     axis.line.y.left   = element_line(color = \"black\", linewidth = 0.4),     panel.grid.minor   = element_blank(),     plot.margin = margin(t = 5, r = 5, b = 20, l = 5)   ) res_indiv_regional_species_mpd <-   IndivSpec_regional_distance(df.TS.TE = df_longevities_canidae,                               time.slice = 0.1,                                dist.trait = dist_body_mass,                               round.digits = 1,                                species = \"species\",                               TS = \"TS\",                               TE = \"TE\",                                nearest.taxon = \"all\") res_indiv_regional_species_mpd |>   filter(     species %in% c(       \"Aelurodon_ferox\",       \"Psalidocyon_marianae\",       \"Aelurodon_taxoides\",       \"Phlaocyon_marslandensis\"     )   ) |>   ggplot(     aes(       x = time.slice,       y = mean_dist_to_cooccur,       color = species,       group = species     )   ) +   geom_smooth(     se = TRUE,     method = \"loess\",     linewidth = 0.8   ) +   geom_line(     linewidth = 0.5   ) +   facet_wrap(~ species, nrow = 2) +   labs(     x = \"Time (Ma)\",     y = \"Mean pairwise distance\"   ) +   scale_x_reverse(     breaks = seq(       from = 0,       to   = max(res_indiv_regional_species_mpd$time.slice, na.rm = TRUE),       by   = 10     )   ) +   coord_cartesian(clip = \"off\") +   theme_minimal(base_size = 10) +     theme(     legend.position = \"none\",     axis.line.x.bottom = element_line(color = \"black\", linewidth = 0.4),     axis.ticks.x       = element_line(color = \"black\", linewidth = 0.4),     axis.text.x        = element_text(size = 8),     axis.line.y.left   = element_line(color = \"black\", linewidth = 0.4),     panel.grid.minor   = element_blank(),     plot.margin = margin(t = 5, r = 5, b = 20, l = 5)   ) res_indiv_regional_species_mnd <-    IndivSpec_regional_distance(df.TS.TE = df_longevities_canidae,                              time.slice = 0.1,                              dist.trait = dist_body_mass,                              nearest.taxon = 1,                             round.digits = 1,                              species = \"species\",                             TS = \"TS\",                             TE = \"TE\")"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"site-scale-1","dir":"Articles","previous_headings":"Individual species analysis","what":"Site scale","title":"Time series metrics","text":"perform calculations using site criteria individual species coexistence plotting species coexistence considering site coexistence can calculate mean pairwise distances individual species coexistence metrics based site co-occurrence","code":"res_indiv_species_site_coex <-    IndivSpec_site_coexistence(df.TS.TE = df_longevities_canidae,                              df.occ = df_occ_canidae,                               time.slice = 0.1,                              round.digits = 5,                              species = \"species\",                              TS = \"TS\",                              TE = \"TE\",                              Max.age = \"max_T\",                              Min.age = \"min_T\",                              site = \"site.char\") res_indiv_species_site_coex |>   filter(     species %in% c(       \"Aelurodon_ferox\",       \"Psalidocyon_marianae\",       \"Aelurodon_taxoides\",       \"Phlaocyon_marslandensis\"     )   ) |>   ggplot(     aes(       x = time.slice,       y = n.coexistence,       color = species,       group = species     )   ) +   geom_smooth(     se = TRUE,     method = \"loess\",     linewidth = 0.8   ) +   geom_line(     linewidth = 0.5   ) +   facet_wrap(~ species, nrow = 2) +   labs(     x = \"Time\",     y = \"Number of coexistences by species\"   ) +   scale_x_reverse(     breaks = seq(       from = 0,       to   = max(res_indiv_species_coex$time.slice, na.rm = TRUE),       by   = 10     )   ) +   coord_cartesian(clip = \"off\") +   theme_minimal(base_size = 10) +     theme(     legend.position = \"none\",     axis.line.x.bottom = element_line(color = \"black\", linewidth = 0.4),     axis.ticks.x       = element_line(color = \"black\", linewidth = 0.4),     axis.text.x        = element_text(size = 8),     axis.line.y.left   = element_line(color = \"black\", linewidth = 0.4),     panel.grid.minor   = element_blank(),     plot.margin = margin(t = 5, r = 5, b = 20, l = 5)   ) indiv_species_site_mpd <-    IndivSpec_site_distance(df.TS.TE = df_longevities_canidae,                       df.occ = df_occ_canidae,                       time.slice = 0.1,                       dist.trait = dist_body_mass,                       nearest.taxon = \"all\",                      round.digits = 1,                      species = \"species\",                      TS = \"TS\",                      TE = \"TE\",                      Max.age = \"max_T\",                      Min.age = \"min_T\",                      site = \"site.char\")"},{"path":"https://gabrielnakamura.github.io/Buccaneer/articles/time-series-metrics.html","id":"reach-criteria-1","dir":"Articles","previous_headings":"Individual species analysis","what":"Reach criteria","title":"Time series metrics","text":"calculate individual mean coexistence using reach criteria plotting individual species coexistence reach criteria Individual reach coexistence mpd mnd Plotting result","code":"res_indiv_species_reach_coex <-    IndivSpecies_reach_coexistence(df.TS.TE = df_longevities_canidae,                                  df.occ = df_occ_canidae,                                  time.slice = 0.1,                                   round.digits = 1,                                  species = \"species\",                                  TS = \"TS\",                                  TE = \"TE\",                                  Max.age = \"max_T\",                                  Min.age = \"min_T\",                                  lat = \"lat\",                                  lon = \"lng\") res_indiv_species_reach_coex |>   filter(     species %in% c(       \"Aelurodon_ferox\",       \"Psalidocyon_marianae\",       \"Aelurodon_taxoides\",       \"Phlaocyon_marslandensis\"     )   ) |>   ggplot(     aes(       x = time.slice,       y = n.coexistence,       color = species,       group = species     )   ) +   geom_smooth(     se = TRUE,     method = \"loess\",     linewidth = 0.8   ) +   geom_line(     linewidth = 0.5   ) +   facet_wrap(~ species, nrow = 2) +   labs(     x = \"Time\",     y = \"Number of coexistences by species\"   ) +   scale_x_reverse(     breaks = seq(       from = 0,       to   = max(res_indiv_species_reach_coex$time.slice, na.rm = TRUE),       by   = 3     )   ) +   coord_cartesian(clip = \"off\") +   theme_minimal(base_size = 10) +     theme(     legend.position = \"none\",     axis.line.x.bottom = element_line(color = \"black\", linewidth = 0.4),     axis.ticks.x       = element_line(color = \"black\", linewidth = 0.4),     axis.text.x        = element_text(size = 8),     axis.line.y.left   = element_line(color = \"black\", linewidth = 0.4),     panel.grid.minor   = element_blank(),     plot.margin = margin(t = 5, r = 5, b = 20, l = 5)   ) res_indiv_species_reach_distance <-    IndivSpec_reach_distance(df.TS.TE = df_longevities_canidae,                             dist.trait = dist_body_mass,                             nearest.taxon = \"all\",                            crs = 4326,                             df.occ = df_occ_canidae,                            time.slice = 0.1,                             round.digits = 1,                            species = \"species\",                            TS = \"TS\",                            TE = \"TE\",                            Max.age = \"max_T\",                            Min.age = \"min_T\",                            lat = \"lat\",                            lon = \"lng\") res_indiv_species_reach_distance |>   filter(     species %in% c(       \"Aelurodon_ferox\",       \"Psalidocyon_marianae\",       \"Aelurodon_taxoides\",       \"Phlaocyon_marslandensis\"     )   ) |>   ggplot(     aes(       x = time.slice,       y = mean_dist_to_cooccur,       color = species,       group = species     )   ) +   geom_smooth(     se = TRUE,     method = \"loess\",     linewidth = 0.8   ) +   geom_line(     linewidth = 0.5   ) +   facet_wrap(~ species, nrow = 2) +   labs(     x = \"Time (Ma)\",     y = \"Mean individual distance in morphospace\"   ) +   scale_x_reverse(     breaks = seq(       from = 0,       to   = max(res_indiv_species_reach_distance$time.slice, na.rm = TRUE),       by   = 10     )   ) +   coord_cartesian(clip = \"off\") +   theme_minimal(base_size = 10) +     theme(     legend.position = \"none\",     axis.line.x.bottom = element_line(color = \"black\", linewidth = 0.4),     axis.ticks.x       = element_line(color = \"black\", linewidth = 0.4),     axis.text.x        = element_text(size = 8),     axis.line.y.left   = element_line(color = \"black\", linewidth = 0.4),     panel.grid.minor   = element_blank(),     plot.margin = margin(t = 5, r = 5, b = 20, l = 5)   )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"First Last. Author, maintainer.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Last F (2026). buccaneer: Package (One Line, Title Case). R package version 0.0.0.9000, https://gabrielnakamura.github.io/Buccaneer/.","code":"@Manual{,   title = {buccaneer: What the Package Does (One Line, Title Case)},   author = {First Last},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://gabrielnakamura.github.io/Buccaneer/}, }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/index.html","id":"download","dir":"","previous_headings":"","what":"What the Package Does (One Line, Title Case)","title":"What the Package Does (One Line, Title Case)","text":"install development version package user must type:","code":"# install.packages(\"devtools\") devtools::install_github(\"GabrielNakamura/Buccaneer\", ref = \"main\")"},{"path":"https://gabrielnakamura.github.io/Buccaneer/index.html","id":"help-page","dir":"","previous_headings":"","what":"Help page","title":"What the Package Does (One Line, Title Case)","text":"","code":"help(package = \"buccaneer\")"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/Assemblage_regional_richness.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","title":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","text":"function computes species richness fossil assemblages across spatial grid cells temporal bins. divides geographic space regular grid temporal ranges discrete time slices, calculates number species present grid cell time slice based occurrence records species longevities.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/Assemblage_regional_richness.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","text":"","code":"Assemblage_regional_richness(   df.TS.TE,   df.occ,   time.slice,   grid.size,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   lat = \"lat\",   lon = \"lng\",   crs = 4326 )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/Assemblage_regional_richness.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). df.occ data frame containing fossil occurrence records least five columns: species names, minimum age, maximum age, latitude, longitude. row represents single occurrence record specific location. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. grid.size Numeric. size grid cells degrees spatial binning. example, grid.size = 5 creates 5° × 5° grid cells. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (start) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (end) times species. Default \"TE\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". lat Character. name column df.occ containing latitude coordinates occurrence records. Default \"lat\". lon Character. name column df.occ containing longitude coordinates occurrence records. Default \"lng\". crs Numeric character. coordinate reference system (CRS) code spatial data. Default 4326 (WGS84 geographic coordinates).","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/Assemblage_regional_richness.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","text":"list containing two elements: grid_mean_age sf object grid cell geometries temporal summaries. Contains columns: grid_id: Unique identifier grid cell mean.age.grid: Mean age occurrences grid cell var.age.grid: Variance ages grid cell geometry: Spatial geometry grid cell time_series_rich data frame richness metric grid cell time slice. Contains columns: grid_id: Grid cell identifier mean.age.grid: Mean age occurrences grid cell var.age.grid: Variance ages grid cell time.slice: Time slice identifier rich..grid: Species richness grid cell time slice mean.rich..grid.slice: Mean richness across grid cells time slice geometry: Spatial geometry grid cell","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/Assemblage_regional_richness.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","text":"function performs following steps: Creates spatial grid covering extent occurrence records Assigns occurrence grid cell based coordinates Calculates temporal statistics (mean variance ages) grid cell Divides temporal range discrete time slices time slice, identifies species present based longevities Counts species richness grid cell time slice Computes mean richness across grid cells within time slice Missing invalid coordinates (NA values) automatically removed spatial analysis. Grid cells without occurrences time slice appear results time slice.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/Assemblage_regional_richness.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Species Richness Across Time Slices and Grid Cells — Assemblage_regional_richness","text":"","code":"if (FALSE) { # \\dontrun{ # Create example data df_temporal <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 95, 90, 85),   TE = c(50, 45, 40, 35) )  df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp2\", \"sp3\", \"sp4\"),   Max.age = c(100, 95, 95, 90, 85),   Min.age = c(90, 85, 85, 80, 75),   lat = c(10.5, 15.2, 20.1, 25.3, 30.0),   lng = c(-50.0, -55.5, -60.2, -65.0, -70.5) )  # Calculate regional richness with 10 Ma time slices and 5° grid cells results <- Assemblage_regional_richness(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   grid.size = 5 )  # Access grid-level summaries grid_summary <- results$grid_mean_age  # Access time series of richness richness_timeseries <- results$time_series_rich  # Plot richness for a specific time slice library(ggplot2) slice_data <- subset(results$time_series_rich, time.slice == 90) ggplot(slice_data) +   geom_sf(aes(fill = rich.by.grid)) +   scale_fill_viridis_c() +   theme_minimal() } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_reach_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mean Individual Species Trait Distances Across Time Slices With Reach Criteria — IndivSpec_reach_distance","title":"Calculate Mean Individual Species Trait Distances Across Time Slices With Reach Criteria — IndivSpec_reach_distance","text":"Calculate Mean Individual Species Trait Distances Across Time Slices Reach Criteria","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_reach_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mean Individual Species Trait Distances Across Time Slices With Reach Criteria — IndivSpec_reach_distance","text":"","code":"IndivSpec_reach_distance(   df.TS.TE,   df.occ,   time.slice,   dist.trait,   nearest.taxon,   round.digits,   species,   TS,   TE,   lat,   lon,   Max.age = \"Max.age\",   Min.age = \"Min.age\",   crs = 4326,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_reach_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mean Individual Species Trait Distances Across Time Slices With Reach Criteria — IndivSpec_reach_distance","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least five columns: species names, minimum age, maximum age, latitude longitude. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". lat Numeric. latitude coordinate occurrence record df.occ. lon Numeric. longitude coordinate occurrence records df.occ. Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". crs Numeric. code indicating coordinate reference system used latitude longitude occurrence records df.occ group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), coexistence calculated across species regardless group membership. type.comparison Character. Specifies type coexistence comparison: \"\": Count co-occurrences species focal comparison groups. \"within\": Count co-occurrences among species within focal group. NULL (default): Count co-occurrences regardless group. remove.singletons Logical. singleton species (species occurring alone site co-occurring species) excluded mean variance calculations? Default TRUE. TRUE, singletons treated NA; FALSE, contribute 0 mean.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_reach_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mean Individual Species Trait Distances Across Time Slices With Reach Criteria — IndivSpec_reach_distance","text":"data frame three columns: mean.distance Numeric. mean distance individual species time slice cooccurring species according reach criteria. represents average distance species morphospace relative cooccurring species (excluding including singletons based remove.singletons). var.distance Numeric. variance mean distance individual species time slice. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_regional_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","text":"function computes mean pairwise trait distances species co-occur regional scale across different time slices. species present time, calculates mean distance co-occurring species, supporting mean nearest neighbor distance (MNND) mean pairwise distance (MPD) metrics. function can perform comparisons groups within single group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_regional_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","text":"","code":"IndivSpec_regional_distance(   df.TS.TE,   time.slice,   dist.trait,   nearest.taxon,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL,   trait = NULL,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_regional_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","text":"df.TS.TE data frame containing species temporal , optionally, trait data least three columns: species names, origination times (TS), extinction times (TE), , optionally, trait values. Additional columns may include group assignments. time.slice Numeric. time interval (units TS TE) consecutive time slices binning occurrences. dist.trait distance matrix object (class dist matrix) containing pairwise trait distances species. Row column names must match species names df.TS.TE. NULL, distances computed trait column df.TS.TE using Euclidean distance. nearest.taxon Numeric character. number nearest neighbors consider calculating mean distances. Use 1 mean nearest neighbor distance (MNND), \"\" mean pairwise distance (MPD). group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), distances calculated across species regardless group membership. type.comparison Character. Specifies type distance comparison: \"\": Calculate distances species focal comparison groups. \"within\": Calculate distances among species within focal group. NULL (default): Calculate distances among species together. trait Character. name column df.TS.TE containing trait values. NULL (default), dist.trait must provided. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction times species. Default \"TE\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_regional_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","text":"data frame four columns: species Character. name species. time.slice Numeric. time slice identifier. mean_dist_to_cooccur Numeric. mean trait distance species co-occurring species site time slice. Returns 0 singleton species (species co-occurring taxa), NA data insufficient. is_singleton Logical. TRUE species occurred alone site time slice, FALSE otherwise.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_regional_distance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","text":"function performs following steps: Divides temporal range discrete time slices based time.slice Determines species co-occur site within time slice species site, calculates mean trait distances co-occurring species Optionally filters comparisons group membership (focal vs. comparison groups) Species-level results include: Singleton species: Species occurring alone site receive mean_dist_to_cooccur value 0 is_singleton = TRUE Missing data: Time slices sites insufficient data return NA Group filtering: using group.focal.compare, distances specified groups computed","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_regional_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Regional Scale — IndivSpec_regional_distance","text":"","code":"# Create example fossil data df_longevities <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 98, 98, 85),   TE = c(50, 45, 40, 35),   trait = c(1.2, 2.5, 3.1, 4.0),   group = c(\"A\", \"A\", \"B\", \"B\") )  # Calculate MPD for all species at each site result <- IndivSpec_regional_distance(   df.TS.TE = df_longevities,   trait = \"trait\",   time.slice = 5,   dist.trait = NULL,   nearest.taxon = \"all\" )  # Calculate MNND between groups at each site result_between <- IndivSpec_regional_distance(   df.TS.TE = df_longevities,   time.slice = 5,   trait = \"trait\",   dist.trait = NULL,   nearest.taxon = \"all\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"between\" )   result_within <- IndivSpec_regional_distance(   df.TS.TE = df_longevities,   time.slice = 5,   trait = \"trait\",   dist.trait = NULL,   nearest.taxon = \"all\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"within\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_coexistence.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","title":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","text":"function computes number co-occurring species individual species fossil sites across different time slices. species present sites time slice, counts many species co-occurs , providing species-specific co-occurrence patterns time. function can perform comparisons taxonomic groups within single group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_coexistence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","text":"","code":"IndivSpec_site_coexistence(   df.TS.TE,   df.occ,   time.slice,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\",   remove.singletons = TRUE,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_coexistence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". site Character. name column df.occ containing site location identifiers. Default \"site\". remove.singletons Logical. singleton species (species occurring alone sites co-occurring species) excluded output? Default TRUE. TRUE, species n.coexistence = 0 removed. group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), co-occurrence calculated across species regardless group membership. type.comparison Character. Specifies type co-occurrence comparison: \"\": Count co-occurrences species focal comparison groups. \"within\": Count co-occurrences among species within focal group. NULL (default): Count co-occurrences regardless group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_coexistence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","text":"data frame three columns: time.slice Character. time slice identifier (e.g., \"100\" time slice 100 Ma). species Character. name species. n.coexistence Integer. number species co-occur focal species sites time slice. Self-coexistence excluded (species count co-occurring ).","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_coexistence.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","text":"function performs following steps: Creates time slices maximum TS minimum TE Generates regional co-occurrence matrices using aux_matrix_regional_coex() Determines species occur sites time slice Creates site-based co-occurrence matrices using comp_site_cooccurr() species, counts number co-occurring species across sites Optionally removes singleton species (zero co-occurrences) Optionally filters group membership Co-occurrence calculation details: Self-coexistence: Automatically excluded counts Singleton species: Species n.coexistence = 0 remove.singletons = TRUE: Excluded output remove.singletons = FALSE: Included value 0 Site aggregation: Co-occurrence counts summed across sites species occurs time slice Group comparisons: using group.focal.compare, counts co-occurrences /within specified groups function differs clade_site_coexistence() returning species-level results rather time slice-level aggregated means. useful analyzing individual species' ecological associations time identifying species consistently high low co-occurrence patterns.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_coexistence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Species-Level Co-occurrence at Sites Across Time Slices — IndivSpec_site_coexistence","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil data df_temporal <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 95, 90, 85),   TE = c(50, 45, 40, 35),   group = c(\"A\", \"A\", \"B\", \"B\") )  df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp2\", \"sp3\", \"sp4\", \"sp4\"),   Max.age = c(100, 95, 95, 90, 85, 85),   Min.age = c(90, 85, 85, 80, 75, 75),   site = c(\"site1\", \"site2\", \"site1\", \"site1\", \"site2\", \"site3\") )  # Calculate species-level co-occurrence through time result <- IndivSpec_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10 )  # View results head(result)  # Plot co-occurrence patterns for a specific species library(ggplot2) sp1_data <- subset(result, species == \"sp1\") ggplot(sp1_data, aes(x = time.slice, y = n.coexistence)) +   geom_col() +   labs(x = \"Time Slice\", y = \"Number of Co-occurring Species\",        title = \"Co-occurrence Pattern for sp1\") +   theme_minimal()  # Compare co-occurrence between species ggplot(result, aes(x = time.slice, y = n.coexistence, fill = species)) +   geom_col(position = \"dodge\") +   labs(x = \"Time Slice\", y = \"Number of Co-occurring Species\") +   theme_minimal()  # Include singleton species in results result_with_singletons <- IndivSpec_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   remove.singletons = FALSE )  # Identify singleton species singletons <- subset(result_with_singletons, n.coexistence == 0) singletons  # Calculate co-occurrence between groups result_between <- IndivSpec_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"between\" )  # Calculate co-occurrence within a single group result_within <- IndivSpec_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"within\" )  # Summary statistics: mean co-occurrence per species across time library(dplyr) species_summary <- result %>%   group_by(species) %>%   summarise(     mean_coexistence = mean(n.coexistence),     sd_coexistence = sd(n.coexistence),     max_coexistence = max(n.coexistence)   ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","text":"function computes mean pairwise trait distances species co-occur specific fossil sites across different time slices. species present site, calculates mean distance co-occurring species, supporting mean nearest neighbor distance (MNND) mean pairwise distance (MPD) metrics. function can perform comparisons groups within single group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","text":"","code":"IndivSpec_site_distance(   df.TS.TE,   df.occ,   time.slice,   dist.trait,   nearest.taxon,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL,   trait = NULL,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","text":"df.TS.TE data frame containing species temporal , optionally, trait data least three columns: species names, origination times (TS), extinction times (TE), , optionally, trait values. Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices binning occurrences. dist.trait distance matrix object (class dist matrix) containing pairwise trait distances species. Row column names must match species names df.TS.TE. NULL, distances computed trait column df.TS.TE using Euclidean distance. nearest.taxon Numeric character. number nearest neighbors consider calculating mean distances. Use 1 mean nearest neighbor distance (MNND), \"\" mean pairwise distance (MPD). group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), distances calculated across species regardless group membership. type.comparison Character. Specifies type distance comparison: \"\": Calculate distances species focal comparison groups. \"within\": Calculate distances among species within focal group. NULL (default): Calculate distances among species together. trait Character. name column df.TS.TE containing trait values. NULL (default), dist.trait must provided. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction times species. Default \"TE\". Max.age Character. name column df.occ containing maximum time estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum age estimate occurrence record. Default \"Min.age\". site Character. name column df.occ containing site location identifiers. Default \"site\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","text":"data frame four columns: species Character. name species. time.slice Numeric. time slice identifier. mean_dist_to_cooccur Numeric. mean trait distance species co-occurring species site time slice. Returns 0 singleton species (species co-occurring taxa), NA data insufficient. is_singleton Logical. TRUE species occurred alone site time slice, FALSE otherwise.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_distance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","text":"function performs following steps: Divides temporal range discrete time slices based time.slice Determines species co-occur site within time slice species site, calculates mean trait distances co-occurring species Optionally filters comparisons group membership (focal vs. comparison groups) Species-level results include: Singleton species: Species occurring alone site receive mean_dist_to_cooccur value 0 is_singleton = TRUE Missing data: Time slices sites insufficient data return NA Group filtering: using group.focal.compare, distances specified groups computed","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpec_site_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Mean Trait Distance for Individual Species Co-occurring at Local Sites — IndivSpec_site_distance","text":"","code":"# Create example fossil data df_longevities <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 98, 98, 85),   TE = c(50, 45, 40, 35),   trait = c(1.2, 2.5, 3.1, 4.0),   group = c(\"A\", \"A\", \"B\", \"B\") )  df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp2\", \"sp3\", \"sp4\"),   Max.age = c(90, 95, 95, 95, 85),   Min.age = c(60, 65, 50, 80, 80),   site = c(\"site1\", \"site2\", \"site2\", \"site1\", \"site2\") )  # Calculate MPD for all species at each site result <- IndivSpec_site_distance(   df.TS.TE = df_longevities,   df.occ = df_occurrences,   trait = \"trait\",   time.slice = 5,   dist.trait = NULL,   nearest.taxon = \"all\" ) #> Error in loadNamespace(x): there is no package called ‘tidyr’  # Calculate MNND between groups at each site result_between <- IndivSpec_site_distance(   df.TS.TE = df_longevities,   df.occ = df_occurrences,   time.slice = 5,   trait = \"trait\",   dist.trait = NULL,   nearest.taxon = \"all\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"between\" ) #> Error in loadNamespace(x): there is no package called ‘tidyr’   result_within <- IndivSpec_site_distance(   df.TS.TE = df_longevities,   df.occ = df_occurrences,   time.slice = 5,   trait = \"trait\",   dist.trait = NULL,   nearest.taxon = \"all\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"within\" ) #> Error in loadNamespace(x): there is no package called ‘tidyr’"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_reach_coexistence.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Individual Species Coexistence based on reach criteria — IndivSpecies_reach_coexistence","title":"Compute Individual Species Coexistence based on reach criteria — IndivSpecies_reach_coexistence","text":"Compute Individual Species Coexistence based reach criteria","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_reach_coexistence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Individual Species Coexistence based on reach criteria — IndivSpecies_reach_coexistence","text":"","code":"IndivSpecies_reach_coexistence(   df.TS.TE,   df.occ,   time.slice,   round.digits,   species,   TS,   TE,   lat,   lon,   Max.age = \"Max.age\",   Min.age = \"Min.age\",   crs = 4326,   remove.singletons = TRUE,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_reach_coexistence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Individual Species Coexistence based on reach criteria — IndivSpecies_reach_coexistence","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". lat Numeric. latitude coordinate occurrence record df.occ. lon Numeric. longitude coordinate occurrence records df.occ. Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". crs Numeric. code indicating coordinate reference system used latitude longitude occurrence records df.occ remove.singletons Logical. singleton species (species occurring alone site co-occurring species) excluded mean variance calculations? Default TRUE. TRUE, singletons treated NA; FALSE, contribute 0 mean. group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), coexistence calculated across species regardless group membership. type.comparison Character. Specifies type coexistence comparison: \"\": Count co-occurrences species focal comparison groups. \"within\": Count co-occurrences among species within focal group. NULL (default): Count co-occurrences regardless group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_reach_coexistence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Individual Species Coexistence based on reach criteria — IndivSpecies_reach_coexistence","text":"data frame three columns: time.slice Numeric. time point representing slice, typically upper (older) boundary time bin. species Character. name species least one cooccurrence another species. n.coexistence Numeric. number co-occurring species time slice per species.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_regional_coex.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Regional Individual Species Coexistence Across Time Slices — IndivSpecies_regional_coex","title":"Calculate Regional Individual Species Coexistence Across Time Slices — IndivSpecies_regional_coex","text":"function computes number coexisting species time slice regional scale analysis. divides temporal range discrete intervals counts many species overlap interval based origination (TS) extinction (TE) times.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_regional_coex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Regional Individual Species Coexistence Across Time Slices — IndivSpecies_regional_coex","text":"","code":"IndivSpecies_regional_coex(   df.TS.TE,   time.slice,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_regional_coex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Regional Individual Species Coexistence Across Time Slices — IndivSpecies_regional_coex","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times, extinction times. time.slice Numeric. time interval (units TS TE) consecutive time slices. round.digits Integer. number decimal places round time slice values. Default 1. affects precision temporal binning. species Character. name column df.TS.TE containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (start) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (end) times species. Default \"TE\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_regional_coex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Regional Individual Species Coexistence Across Time Slices — IndivSpecies_regional_coex","text":"data frame three columns: time.slice Numeric. time point representing slice. species Character. name species. n.coexistence Numeric. number species coexisting time slice species.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/IndivSpecies_regional_coex.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Regional Individual Species Coexistence Across Time Slices — IndivSpecies_regional_coex","text":"","code":"# Example with fossil data df <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\"),   TS = c(100, 90, 80),   TE = c(50, 40, 30) ) IndivSpecies_regional_coex(df, time.slice = 10) #>   time.slice species n.coexistence #> 1        100     sp1             0 #> 2         90     sp1             1 #> 3         90     sp2             1 #> 4         40     sp2             1 #> 5         40     sp3             1 #> 6         30     sp3             0"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/assemblage_nspecies.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate the number of species in each grid/assemblage/site — assemblage_nspecies","title":"Calculate the number of species in each grid/assemblage/site — assemblage_nspecies","text":"Calculate number species grid/assemblage/site","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/assemblage_nspecies.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate the number of species in each grid/assemblage/site — assemblage_nspecies","text":"","code":"assemblage_nspecies(   df.TS.TE,   df.occ,   time.slice,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/assemblage_nspecies.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate the number of species in each grid/assemblage/site — assemblage_nspecies","text":"site","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/assemblage_site_trait_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute mean distance for species co occurring in sites — assemblage_site_trait_distance","title":"Compute mean distance for species co occurring in sites — assemblage_site_trait_distance","text":"Compute mean distance species co occurring sites","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/assemblage_site_trait_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute mean distance for species co occurring in sites — assemblage_site_trait_distance","text":"","code":"assemblage_site_trait_distance(   df.TS.TE,   df.occ,   time.slice,   dist.trait,   nearest.taxon,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL,   trait = NULL,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/assemblage_site_trait_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute mean distance for species co occurring in sites — assemblage_site_trait_distance","text":"df.TS.TE Data frame object containing least four columns. Species names, origination time, extinction time trait value species. df.occ data frame object containing occurrence records species. must least column indicating name species, minimum maximum age estimate, site location ID. time.slice Scalar indicating time interval consecutive time slices. dist.trait dist object containing clade pairwise distance matrices. name clades object must equal name clades df.TS.TE data frame. nearest.taxon scalar indicating number nearest species/genus used. 1 computes mnnd metric option \"\" computes mpd. group Character indicating name column contain groups used comparison. group.focal.compare Character vector indicating focal (first element) comparison (second element) groups used calculation. NULL, default, metrics  calculated using  clades. type.comparison Character. can \"\" compute distances species/genus two groups \"within\" calculate distance inside focal group. null distance computed considering clades together trait Character indicating name column containing values traits species. NULL, default, user must provide distance matrix. round.digits Scalar indicating precision time slices. species Character indicating name column data frame containing species name information. TS Character indicating name columns data frame containing information origination time. TE Character indicating name column data frame containing information extinction time. Max.age Character indicating name column containing upper age limit occurrence record. Min.age Character indicating name column containing lower age limit occurrence record. site Character indicating name column containing information site location.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/aux_matrix_regional_coex.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","title":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","text":"auxiliary function creates species--species co-occurrence matrices time slice based temporal range overlap regional scale. Species considered co-occur time slice longevities (origination extinction) overlap temporal interval. function returns list binary matrices indicating species pairs temporally contemporaneous time slice.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/aux_matrix_regional_coex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","text":"","code":"aux_matrix_regional_coex(   df.TS.TE,   time.slice,   round.digits = 10,   species = \"species\",   TS = \"TS\",   TE = \"TE\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/aux_matrix_regional_coex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). row represents one species temporal range. time.slice Numeric. time interval (units TS TE) consecutive time slices. Negative values create backwards intervals maximum TS minimum TE. round.digits Integer. number decimal places round time values checking temporal overlap. Default 10. Higher values provide precise temporal binning. species Character. name column df.TS.TE containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/aux_matrix_regional_coex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","text":"list binary co-occurrence matrices, one matrix per time slice. matrix following properties: Dimensions: n × n, n = total number species df.TS.TE Row column names: Species identifiers Cell values: 1 species' temporal ranges overlap time slice, 0 otherwise Diagonal elements: 1 species present time slice, 0 absent list length equals number time slices, ordered oldest youngest.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/aux_matrix_regional_coex.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","text":"function performs following steps: Creates sequence time slices maximum TS minimum TE time slice, identifies species whose temporal ranges overlap: Species present : TS >= time slice TE <= time slice Creates square matrix species (including absent ones) Sets matrix values 1 pairwise combinations present species Sets matrix values 0 absent species non-overlapping pairs Matrix interpretation: Diagonal = 1: Species present time slice Diagonal = 0: Species absent time slice -diagonal = 1: species co-occur (temporal overlap) -diagonal = 0: least one species absent function typically used internally functions package determine regional-scale temporal co-occurrence patterns. matrices maintain constant dimensions across time slices, facilitating comparisons downstream analyses.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/aux_matrix_regional_coex.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Regional Species Co-occurrence Matrices Across Time Slices — aux_matrix_regional_coex","text":"","code":"if (FALSE) { # \\dontrun{ # Create example temporal data df_temporal <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 95, 90, 85),   TE = c(60, 55, 50, 45) )  # Generate co-occurrence matrices with 10 Ma time slices cooccur_matrices <- aux_matrix_regional_coex(   df.TS.TE = df_temporal,   time.slice = 10 )  # View first time slice matrix (most recent) cooccur_matrices[[1]]  # Check which species co-occur in the first time slice species_present <- rownames(cooccur_matrices[[1]])[diag(cooccur_matrices[[1]]) == 1] species_present  # Count number of co-occurring species for each species in first slice cooccur_counts <- rowSums(cooccur_matrices[[1]]) - 1  # subtract self cooccur_counts[cooccur_counts >= 0]  # only for present species  # Use custom column names df_custom <- data.frame(   taxon = c(\"sp1\", \"sp2\", \"sp3\"),   first_appearance = c(100, 95, 90),   last_appearance = c(70, 65, 60) )  cooccur_custom <- aux_matrix_regional_coex(   df.TS.TE = df_custom,   time.slice = 5,   species = \"taxon\",   TS = \"first_appearance\",   TE = \"last_appearance\" ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_null_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","title":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","text":"function generates null distributions trait distances randomly permuting species occurrences across sites maintaining observed number species per site (fixed row sums) total occurrences per species (fixed column sums). computes mean trait distances permutation create null expectations comparing observed patterns.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_null_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","text":"","code":"calc_null_model(   list_occurrence,   dist_matrix_trait,   nearest.taxon,   nperm = 1000 )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_null_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","text":"list_occurrence list element represents time slice contains data frame species occurrences across sites assemblages. data frame sites rows species columns (plus one column site identifiers). Presence indicated 1, absence 0. dist_matrix_trait distance matrix (class matrix dist) containing pairwise trait distances species. Row column names must match species names list_occurrence. nearest.taxon Numeric character. number nearest neighbors consider calculating mean distances. Use numeric value (e.g., 1) mean nearest neighbor distance (MNND), \"\" mean pairwise distance (MPD). nperm Integer. number permutations generate null model. Default 1000. Higher values provide robust null distributions increase computation time.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_null_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","text":"matrix nperm rows columns equal length list_occurrence. row represents one permutation, column represents one time slice. Cell values contain mean trait distances calculated randomized occurrence data.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_null_model.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","text":"function performs following steps time slice: Generates nperm random permutations occurrence matrix using vegan::permatfull() fixed row column margins permutation, creates species co-occurrence matrix Filters trait distance matrix include co-occurring species Calculates mean distances based nearest.taxon: numeric: computes mean nearest.taxon nearest neighbors \"\": computes mean pairwise distance (MPD) among co-occurring species null model maintains: Species richness site (row sums) Total number occurrences species (column sums) Presence/absence structure (binary data) approach tests whether observed trait distances deviate expectations random community assembly constrained species prevalence site richness.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_null_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Null Model for Trait Distances with Fixed Site Richness — calc_null_model","text":"","code":"if (FALSE) { # \\dontrun{ # Create example occurrence data for two time slices occ_slice1 <- data.frame(   site = c(\"site1\", \"site2\", \"site3\"),   sp1 = c(1, 1, 0),   sp2 = c(1, 0, 1),   sp3 = c(0, 1, 1) )  occ_slice2 <- data.frame(   site = c(\"site1\", \"site2\", \"site3\"),   sp1 = c(1, 0, 1),   sp2 = c(1, 1, 0),   sp4 = c(0, 1, 1) )  list_occ <- list(occ_slice1, occ_slice2)  # Create trait distance matrix traits <- c(1.2, 2.5, 3.1, 4.0) names(traits) <- c(\"sp1\", \"sp2\", \"sp3\", \"sp4\") dist_trait <- as.matrix(dist(traits))  # Calculate null model with 100 permutations for MNND null_results_mnnd <- calc_null_model(   list_occurrence = list_occ,   dist_matrix_trait = dist_trait,   nearest.taxon = 1,   nperm = 100 )  # Calculate null model for MPD null_results_mpd <- calc_null_model(   list_occurrence = list_occ,   dist_matrix_trait = dist_trait,   nearest.taxon = \"all\",   nperm = 100 )  # Calculate observed values (hypothetical) observed_values <- c(2.3, 2.7)  # for two time slices  # Calculate standardized effect sizes (SES) ses <- (observed_values - colMeans(null_results_mpd)) /        apply(null_results_mpd, 2, sd)  # Test significance (two-tailed) p_values <- colMeans(abs(null_results_mpd -              rep(observed_values, each = nrow(null_results_mpd))) >=              abs(observed_values - colMeans(null_results_mpd))) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_reach.html","id":null,"dir":"Reference","previous_headings":"","what":"Auxiliar function to calculate reach criteria — calc_reach","title":"Auxiliar function to calculate reach criteria — calc_reach","text":"Auxiliar function calculate reach criteria","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_reach.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Auxiliar function to calculate reach criteria — calc_reach","text":"","code":"calc_reach(df.coords)"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/calc_reach.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Auxiliar function to calculate reach criteria — calc_reach","text":"df.coords","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/check_crossing_boundaries.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","title":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","text":"function analyzes fossil occurrence records align predefined time bins classifying record based whether age uncertainty (minimum maximum ages) falls completely within bin, crosses one boundary, spans multiple bins. useful assessing data quality understanding temporal resolution fossil occurrences relative time bins used analyses.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/check_crossing_boundaries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","text":"","code":"check_crossing_boundaries(   df.occ.fossil,   interval,   species = \"species\",   Max.age = \"Maximum_Age\",   Min.age = \"Minimum_Age\",   remove.sub.species = TRUE )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/check_crossing_boundaries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","text":"df.occ.fossil data frame containing fossil occurrence records least three columns: species names, maximum (oldest) age estimates, minimum (youngest) age estimates. row represents single occurrence record age uncertainty. interval Numeric vector. sequence time bin boundaries descending order (oldest youngest). example, c(100, 90, 80, 70) creates three time bins: 100-90, 90-80, 80-70. Must least two elements. species Character. name column df.occ.fossil containing species identifiers. Default \"species\". Max.age Character. name column df.occ.fossil containing maximum (oldest) age estimate occurrence record. Default \"Maximum_Age\". Min.age Character. name column df.occ.fossil containing minimum (youngest) age estimate occurrence record. Default \"Minimum_Age\". remove.sub.species Logical. subspecies-level identifications removed, keeping species-level records? Default TRUE. parameter passed clean_occ_fossil().","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/check_crossing_boundaries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","text":"list containing two elements: summary_table named numeric vector showing percentage occurrence records category: within: Records completely contained within time bin upper_only: Records crossing upper (older) boundary lower_only: Records crossing lower (younger) boundary : Records spanning entire time bin (crossing boundaries) df_records_interval data frame containing occurrence records added columns: boundaries: Classification boundary crossing (one four categories ) time.interval: time bin identifier (e.g., \"100-90\") original columns cleaned occurrence data","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/check_crossing_boundaries.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","text":"function classifies occurrence record one four categories: within: Max.age Min.age fall within time bin boundaries (Max.age <= upper boundary Min.age >= lower boundary) upper_only: record crosses upper (older) boundary (Max.age > upper boundary Min.age within bin) lower_only: record crosses lower (younger) boundary (Min.age < lower boundary Max.age within bin) : record spans entire time bin, crossing boundaries (Max.age >= upper boundary Min.age <= lower boundary) classification, function calls clean_occ_fossil() : Calculate midpoint ages Optionally remove subspecies-level identifications Standardize column names Records crossing boundaries indicate age uncertainty exceeds temporal resolution time bins. High percentages crossing records may suggest finer time bins different binning strategies considered analysis.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/check_crossing_boundaries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Occurrence Records Crossing Time Bin Boundaries — check_crossing_boundaries","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil occurrence data with age uncertainties df_fossils <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\", \"sp5\"),   Maximum_Age = c(95, 105, 88, 92, 110),   Minimum_Age = c(85, 95, 82, 78, 70) )  # Define time bins (100-90, 90-80, 80-70) time_bins <- c(100, 90, 80, 70)  # Check boundary crossing patterns results <- check_crossing_boundaries(   df.occ.fossil = df_fossils,   interval = time_bins )  # View summary of boundary crossing results$summary_table  # View detailed classification for all records head(results$df_records_interval)  # Filter records that span entire bins spanning_records <- subset(   results$df_records_interval,   boundaries == \"both\" )  # Visualize boundary crossing patterns library(ggplot2) ggplot(results$df_records_interval,        aes(x = time.interval, fill = boundaries)) +   geom_bar(position = \"fill\") +   labs(y = \"Proportion\", x = \"Time Interval\") +   theme_minimal()  # Calculate statistics by time interval library(dplyr) interval_summary <- results$df_records_interval %>%   group_by(time.interval, boundaries) %>%   summarise(count = n(), .groups = \"drop\") } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_coexistence.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute species coexistence for each time slice based on reach metric — clade_reach_coexistence","title":"Compute species coexistence for each time slice based on reach metric — clade_reach_coexistence","text":"Compute species coexistence time slice based reach metric","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_coexistence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute species coexistence for each time slice based on reach metric — clade_reach_coexistence","text":"","code":"clade_reach_coexistence(   df.TS.TE,   df.occ,   time.slice,   round.digits,   species,   TS,   TE,   lat,   lon,   Max.age = \"Max.age\",   Min.age = \"Min.age\",   crs = 4326,   remove.singletons = TRUE,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_coexistence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute species coexistence for each time slice based on reach metric — clade_reach_coexistence","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". lat Numeric. latitude coordinate occurrence record df.occ. lon Numeric. longitude coordinate occurrence records df.occ. Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". crs Numeric. code indicating coordinate reference system used latitude longitude occurrence records df.occ remove.singletons Logical. singleton species (species occurring alone site co-occurring species) excluded mean variance calculations? Default TRUE. TRUE, singletons treated NA; FALSE, contribute 0 mean. group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), coexistence calculated across species regardless group membership. type.comparison Character. Specifies type coexistence comparison: \"\": Count co-occurrences species focal comparison groups. \"within\": Count co-occurrences among species within focal group. NULL (default): Count co-occurrences regardless group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_coexistence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute species coexistence for each time slice based on reach metric — clade_reach_coexistence","text":"data frame three columns: mean.coexistence Numeric. mean number co-occurring species time slice. represents average local coexistence (excluding including singletons based remove.singletons). var.coexistence Numeric. variance number co-occurring species time slice. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mean Clade-Level Trait Distances Across Time Slices With Reach Criteria — clade_reach_distance","title":"Calculate Mean Clade-Level Trait Distances Across Time Slices With Reach Criteria — clade_reach_distance","text":"Calculate Mean Clade-Level Trait Distances Across Time Slices Reach Criteria","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mean Clade-Level Trait Distances Across Time Slices With Reach Criteria — clade_reach_distance","text":"","code":"clade_reach_distance(   df.TS.TE,   df.occ,   time.slice,   dist.trait,   nearest.taxon,   round.digits,   species,   TS,   TE,   lat,   lon,   Max.age = \"Max.age\",   Min.age = \"Min.age\",   crs = 4326,   remove.singletons = TRUE,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mean Clade-Level Trait Distances Across Time Slices With Reach Criteria — clade_reach_distance","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least five columns: species names, minimum age, maximum age, latitude longitude. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". lat Numeric. latitude coordinate occurrence record df.occ. lon Numeric. longitude coordinate occurrence records df.occ. Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". crs Numeric. code indicating coordinate reference system used latitude longitude occurrence records df.occ remove.singletons Logical. singleton species (species occurring alone site co-occurring species) excluded mean variance calculations? Default TRUE. TRUE, singletons treated NA; FALSE, contribute 0 mean. group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), coexistence calculated across species regardless group membership. type.comparison Character. Specifies type coexistence comparison: \"\": Count co-occurrences species focal comparison groups. \"within\": Count co-occurrences among species within focal group. NULL (default): Count co-occurrences regardless group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_reach_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mean Clade-Level Trait Distances Across Time Slices With Reach Criteria — clade_reach_distance","text":"data frame three columns: mean.distance Numeric. mean distance among co-occurring species time slice. represents average mean distance morphospace (excluding including singletons based remove.singletons). var.distance Numeric. variance mean distance mophospace among species time slice. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_coexistence.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","title":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","text":"function computes number species (lineages) present regional scale time slice based species temporal ranges. divides temporal range discrete intervals counts many species' longevities (origination extinction) overlap time slice. provides time series regional taxonomic richness geological time.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_coexistence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","text":"","code":"clade_regional_coexistence(   df.TS.TE,   time.slice,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_coexistence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). row represents one species temporal range. time.slice Numeric. time interval (units TS TE) consecutive time slices. Negative values create backwards intervals maximum TS minimum TE. round.digits Integer. number decimal places round time slice values. Default 1. affects precision temporal binning. species Character. name column df.TS.TE containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_coexistence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","text":"data frame two columns: coexistence Numeric. number species present (coexisting) time slice regional scale. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_coexistence.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","text":"function performs following steps: Creates sequence time slices maximum TS minimum TE Generates regional co-occurrence matrices using aux_matrix_regional_coex() time slice, identifies species whose temporal ranges overlap interval (TS >= time slice TE <= time slice) Counts number overlapping species (richness) time slice term \"coexistence\" refers number species whose temporal ranges overlap time slice, representing standing diversity regional scale. equivalent species richness time species region considered. Note: function calculates richness regional (pool) scale, individual sites. site-level assemblage-level richness, see Assemblage_regional_richness().","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_coexistence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Regional Species Richness Across Time Slices — clade_regional_coexistence","text":"","code":"# Create example fossil data with temporal ranges df_longevities <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 98, 98, 85),   TE = c(50, 45, 40, 35) )  # Calculate regional richness through time with 5 Ma time slices res_regional_coexistence <- clade_regional_coexistence(   df.TS.TE = df_longevities,   time.slice = 5,   round.digits = 1 )  # View results head(res_regional_coexistence) #>   coexistence time.slice #> 1           1        100 #> 2           3         95 #> 3           3         90 #> 4           4         85 #> 5           4         80 #> 6           4         75  # Plot richness through time plot(res_regional_coexistence$time.slice,      res_regional_coexistence$coexistence,      type = \"l\",      xlab = \"Time (Ma)\",      ylab = \"Regional Species Richness\",      main = \"Species Richness Through Time\")   # Using custom column names df_custom <- data.frame(   taxon = c(\"sp1\", \"sp2\", \"sp3\"),   first_appearance = c(100, 95, 90),   last_appearance = c(60, 55, 50) )  res_custom <- clade_regional_coexistence(   df.TS.TE = df_custom,   time.slice = 10,   species = \"taxon\",   TS = \"first_appearance\",   TE = \"last_appearance\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","title":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","text":"function computes mean pairwise trait distances species regional scale across different time slices. time slice, calculates mean distance among species whose temporal ranges overlap interval, supporting mean nearest neighbor distance (MNND) mean pairwise distance (MPD) metrics. function can perform comparisons groups (e.g., clades, families) within single group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","text":"","code":"clade_regional_distance(   df.TS.TE,   time.slice,   dist.trait,   nearest.taxon,   trait = NULL,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","text":"df.TS.TE data frame containing species temporal trait data least three columns: species names, origination times (TS), extinction times (TE). Trait values optional object. Additional columns may include group assignments. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. dist.trait distance matrix object (class dist matrix) containing pairwise trait distances species. Row column names must match species names df.TS.TE. NULL, distances computed trait column using Euclidean distance. nearest.taxon Numeric character. number nearest neighbors consider calculating mean distances. Use 1 mean nearest neighbor distance (MNND), \"\" mean pairwise distance (MPD). trait Character. name column df.TS.TE containing trait values. NULL (default), dist.trait must provided. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), distances calculated across species regardless group membership. type.comparison Character. Specifies type distance comparison: \"\": Calculate distances species focal comparison groups. \"within\": Calculate distances among species within focal group. NULL (default): Calculate distances among species together.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","text":"data frame three columns: mean.distance Numeric. mean trait distance among species present time slice. Returns NA insufficient data available (e.g., one species present, representatives required groups). var.distance Numeric. variance trait distances among species time slice. Returns NA insufficient data available. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_distance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","text":"function performs following steps: Creates sequence time slices maximum TS minimum TE Generates regional co-occurrence matrices using aux_matrix_regional_coex() time slice, identifies species whose temporal ranges overlap Computes pairwise trait distances among overlapping species Optionally filters comparisons group membership Calculates mean variance distances based nearest.taxon Distance calculation options: MPD (nearest.taxon = \"\"): Calculates mean pairwise distance considering pairwise comparisons among species MNND (nearest.taxon = 1): Calculates mean nearest neighbor distance using closest species focal species Threshold (nearest.taxon = n): Uses n nearest neighbors focal species Missing values (NA) returned time slices : one species present species required groups present (using group comparisons) Insufficient data distance calculations function calculates distances regional (pool) scale, considering species present time slice regardless geographic distribution. site-level distance calculations, see IndivSpec_site_distance().","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_regional_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Regional Mean Trait Distances Across Time Slices — clade_regional_distance","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil data with traits df_temporal <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 95, 90, 85),   TE = c(50, 45, 40, 35),   trait = c(1.2, 2.5, 3.1, 4.0),   group = c(\"A\", \"A\", \"B\", \"B\") )  # Calculate regional MPD through time result_mpd <- clade_regional_distance(   df.TS.TE = df_temporal,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = \"all\",   trait = \"trait\" )  # View results head(result_mpd)  # Plot mean distance through time plot(result_mpd$time.slice,      result_mpd$mean.distance,      type = \"l\",      xlab = \"Time (Ma)\",      ylab = \"Mean Trait Distance\",      main = \"Regional Trait Distance Through Time\")  # Calculate MNND between groups result_between <- clade_regional_distance(   df.TS.TE = df_temporal,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = 1,   trait = \"trait\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"between\" )  # Calculate distances within a single group result_within <- clade_regional_distance(   df.TS.TE = df_temporal,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = \"all\",   trait = \"trait\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"within\" )  # Using a pre-computed distance matrix dist_matrix <- dist(df_temporal$trait) result_custom_dist <- clade_regional_distance(   df.TS.TE = df_temporal,   time.slice = 10,   dist.trait = dist_matrix,   nearest.taxon = \"all\" ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_coexistence.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","title":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","text":"function computes mean number co-occurring species individual sites across different time slices. time slice, determines species co-occur site based occurrence records temporal ranges, calculates mean variance coexistence across species time slice.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_coexistence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","text":"","code":"clade_site_coexistence(   df.TS.TE,   df.occ,   time.slice,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\",   remove.singletons = TRUE,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_coexistence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","text":"df.TS.TE data frame containing species temporal data least three columns: species names, origination times (TS), extinction times (TE). Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". site Character. name column df.occ containing site location identifiers. Default \"site\". remove.singletons Logical. singleton species (species occurring alone site co-occurring species) excluded mean variance calculations? Default TRUE. TRUE, singletons treated NA; FALSE, contribute 0 mean. group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), coexistence calculated across species regardless group membership. type.comparison Character. Specifies type coexistence comparison: \"\": Count co-occurrences species focal comparison groups. \"within\": Count co-occurrences among species within focal group. NULL (default): Count co-occurrences regardless group.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_coexistence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","text":"data frame three columns: mean.coexistence Numeric. mean number co-occurring species time slice. represents average local coexistence (excluding including singletons based remove.singletons). var.distance Numeric. variance number co-occurring species time slice. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_coexistence.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","text":"function performs following steps: Creates time slices maximum TS minimum TE Generates regional co-occurrence matrices using aux_matrix_regional_coex() Determines species occur sites time slice Creates site-based co-occurrence matrices using comp_site_cooccurr() species site, counts number co-occurring species Calculates mean variance coexistence across species cooccurrence sites Optionally filters group membership Coexistence calculation details: Self-coexistence: Removed counts (species \"co-occur\" ) Singleton species: Species 0 co-occurring taxa remove.singletons = TRUE: Treated NA (excluded mean) remove.singletons = FALSE: Contribute 0 mean Group comparisons: using group.focal.compare, counts co-occurrences /within specified groups function calculates site-level (local) coexistence patterns, differ regional-scale richness. regional richness, see clade_regional_coexistence().","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_coexistence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Mean Site-Level Species Coexistence Across Time Slices — clade_site_coexistence","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil data df_temporal <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 95, 90, 85),   TE = c(50, 45, 40, 35),   group = c(\"A\", \"A\", \"B\", \"B\") )  df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp2\", \"sp3\", \"sp4\", \"sp4\"),   Max.age = c(100, 95, 95, 90, 85, 85),   Min.age = c(90, 85, 85, 80, 75, 75),   site = c(\"site1\", \"site2\", \"site1\", \"site1\", \"site2\", \"site3\") )  # Calculate mean site coexistence through time result <- clade_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10 )  # View results head(result)  # Plot mean coexistence through time plot(result$time.slice,      result$mean.coexistence,      type = \"l\",      xlab = \"Time (Ma)\",      ylab = \"Mean Site Richness\",      main = \"Mean Species Coexistence at Sites Through Time\")  # Add variance as error bars arrows(result$time.slice,        result$mean.coexistence - sqrt(result$var.distance),        result$time.slice,        result$mean.coexistence + sqrt(result$var.distance),        length = 0.05, angle = 90, code = 3)  # Calculate coexistence including singletons result_with_singletons <- clade_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   remove.singletons = FALSE )  # Calculate coexistence between groups result_between <- clade_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"between\" )  # Calculate coexistence within a single group result_within <- clade_site_coexistence(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"within\" ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","title":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","text":"function computes mean trait distances co-occurring species individual sites across different time slices. time slice, calculates mean distance species across sites co-occur, aggregates individual species distances obtain time slice-level mean variance.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","text":"","code":"clade_site_distance(   df.TS.TE,   df.occ,   time.slice,   dist.trait,   nearest.taxon,   group = NULL,   group.focal.compare = NULL,   type.comparison = NULL,   trait = NULL,   round.digits = 1,   species = \"species\",   TS = \"TS\",   TE = \"TE\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","text":"df.TS.TE data frame containing species temporal trait data least four columns: species names, origination times (TS), extinction times (TE), trait values. Additional columns may include group assignments. df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. time.slice Numeric. time interval (units TS TE) consecutive time slices temporal binning. dist.trait distance matrix object (class dist matrix) containing pairwise trait distances species. Row column names must match species names df.TS.TE. NULL, distances computed trait column using Euclidean distance. nearest.taxon Numeric character. number nearest neighbors consider calculating mean distances. Use 1 mean nearest neighbor distance (MNND), \"\" mean pairwise distance (MPD). group Character. name column df.TS.TE containing group assignments species (e.g., clade, family). Required using group.focal.compare. Default NULL. group.focal.compare Character vector length 2. first element specifies focal group second specifies comparison group. NULL (default), distances calculated across species regardless group membership. type.comparison Character. Specifies type distance comparison: \"\": Calculate distances species focal comparison groups. \"within\": Calculate distances among species within focal group. NULL (default): Calculate distances among species together. trait Character. name column df.TS.TE containing trait values. NULL (default), dist.trait must provided. round.digits Integer. number decimal places round time slice values. Default 1. affects temporal binning precision. species Character. name column df.TS.TE df.occ containing species identifiers. Default \"species\". TS Character. name column df.TS.TE containing origination (first appearance) times species. Default \"TS\". TE Character. name column df.TS.TE containing extinction (last appearance) times species. Default \"TE\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". site Character. name column df.occ containing site location identifiers. Default \"site\". remove.singletons Logical. singleton species (species occurring alone site co-occurring species) excluded mean variance calculations? Default TRUE. TRUE, singletons assigned distance 0 may excluded aggregation depending implementation.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","text":"data frame three columns: mean.distance Numeric. mean trait distance across species-site combinations within time slice. calculated first computing mean distances species co-occurring species sites, averaging values across species time slice. Returns NA species occurrence time slice NA_singleton one species occurring var.distance Numeric. variance trait distances across species-site combinations within time slice. time.slice Numeric. time point representing slice, typically upper (older) boundary time bin.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_distance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","text":"function performs following steps: Creates time slices maximum TS minimum TE Generates regional co-occurrence matrices using aux_matrix_regional_coex() Determines species occur sites time slice Creates site-based co-occurrence matrices using comp_site_cooccurr() species site, calculates mean distances co-occurring species Aggregates individual species distances obtain time slice-level mean variance Optionally filters group membership Distance calculation hierarchy: Species-site level: species site, calculate mean distance co-occurring species (based nearest.taxon) Time slice level: Average species-site distances within time slice obtain overall mean variance Special cases: Singleton species: Species co-occurring taxa site assigned distance = 0 flagged (treatment depends remove.singletons) Missing data: Time slices occurrences return NA Group comparisons: using group.focal.compare, distances /within specified groups computed function differs IndivSpec_site_distance() aggregating time slice level rather returning individual species-level results. regional-scale (non-site-based) distances, see clade_regional_distance().","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clade_site_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Mean Site-Level Trait Distances Across Time Slices — clade_site_distance","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil data with traits df_temporal <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp4\"),   TS = c(100, 95, 90, 85),   TE = c(50, 45, 40, 35),   trait = c(1.2, 2.5, 3.1, 4.0),   group = c(\"A\", \"A\", \"B\", \"B\") )  df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp2\", \"sp3\", \"sp4\", \"sp4\"),   Max.age = c(100, 95, 95, 90, 85, 85),   Min.age = c(90, 85, 85, 80, 75, 75),   site = c(\"site1\", \"site2\", \"site1\", \"site1\", \"site2\", \"site3\") )  # Calculate mean site-level MPD through time result_mpd <- clade_site_distance(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = \"all\",   trait = \"trait\" )  # View results head(result_mpd)  # Plot mean distance through time plot(result_mpd$time.slice,      result_mpd$mean.distance,      type = \"l\",      xlab = \"Time (Ma)\",      ylab = \"Mean Site-Level Trait Distance\",      main = \"Mean Trait Distance at Sites Through Time\")  # Add variance as error bands polygon(c(result_mpd$time.slice, rev(result_mpd$time.slice)),         c(result_mpd$mean.distance - sqrt(result_mpd$var.distance),           rev(result_mpd$mean.distance + sqrt(result_mpd$var.distance))),         col = rgb(0, 0, 1, 0.2), border = NA)  # Calculate MNND at sites result_mnnd <- clade_site_distance(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = 1,   trait = \"trait\" )  # Calculate distances between groups at sites result_between <- clade_site_distance(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = \"all\",   trait = \"trait\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"between\" )  # Calculate distances within a single group at sites result_within <- clade_site_distance(   df.TS.TE = df_temporal,   df.occ = df_occurrences,   time.slice = 10,   dist.trait = NULL,   nearest.taxon = \"all\",   trait = \"trait\",   group = \"group\",   group.focal.compare = c(\"A\", \"B\"),   type.comparison = \"within\",   remove.singletons = TRUE ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clean_occ_fossil.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","title":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","text":"function processes standardizes fossil occurrence records calculating age estimates (midpoint, upper, lower bounds), computing age uncertainties, flagging records large age ranges, optionally computing species temporal ranges (origination extinction times), identifying subspecies-level identifications. provides comprehensive data cleaning pipeline paleobiological analyses.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clean_occ_fossil.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","text":"","code":"clean_occ_fossil(   df.occ.fossil,   method.ages = c(\"midpoint\", \"upper\", \"lower\"),   thresh.age.range = 10,   species = \"species\",   Max.age = \"Maximum_Age\",   Min.age = \"Minimum_Age\",   remove.sub.species = TRUE,   comp.TS.TE = TRUE,   lat = NULL,   lng = NULL,   site = NULL,   group = NULL,   trait = NULL )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clean_occ_fossil.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","text":"df.occ.fossil data frame containing fossil occurrence records least three columns: species names, maximum (oldest) age estimates, minimum (youngest) age estimates. Additional columns may include spatial coordinates, site information, group assignments, trait values. method.ages Character. method used estimate representative ages occurrence records. Options include: \"midpoint\" (default): Calculate midpoint max min ages \"upper\": Use maximum (oldest) age \"lower\": Use minimum (youngest) age Note: Currently, function always calculates midpoint regardless parameter. thresh.age.range Numeric. threshold flagging occurrence records large age uncertainties (millions years appropriate time units). Records age ranges (Max.age - Min.age) greater equal value flagged flag.age.range = \"TRUE\". Default 10. species Character. name column df.occ.fossil containing species identifiers. Default \"species\". Max.age Character. name column df.occ.fossil containing maximum (oldest) age estimate occurrence record. Default \"Maximum_Age\". Min.age Character. name column df.occ.fossil containing minimum (youngest) age estimate occurrence record. Default \"Minimum_Age\". remove.sub.species Logical. subspecies-level identifications flagged? Default TRUE. TRUE, adds subspecies column identifying records three words species name (e.g., \"Genus species subspecies\"). comp.TS.TE Logical. species-level temporal ranges (origination extinction times) computed? Default TRUE. TRUE, calculates TS (maximum Max.age) TE (minimum Min.age) species. lat Character. name column containing latitude coordinates. Default NULL. provided, latitude information retained output. lng Character. name column containing longitude coordinates. Default NULL. provided, longitude information retained output. site Character. name column containing site location identifiers. Default NULL. provided, site information retained output. group Character. name column containing group assignments species (e.g., clade, family). Default NULL. provided, group information retained output. trait Character. name column containing trait values species. Default NULL. provided, trait information retained output.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clean_occ_fossil.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","text":"data frame containing original columns plus following added columns: midpoint Numeric. midpoint age calculated (Max.age + Min.age) / 2. age.range Numeric. age uncertainty calculated Max.age - Min.age. flag.age.range Character. \"TRUE\" age.range >= thresh.age.range, \"FALSE\" otherwise. Flags occurrences potentially problematic age uncertainties. TS Numeric (optional, comp.TS.TE = TRUE). Species origination time, calculated maximum Max.age across occurrences species. TE Numeric (optional, comp.TS.TE = TRUE). Species extinction time, calculated minimum Min.age across occurrences species. subspecies Character (optional, remove.sub.species = TRUE). \"subspecies\" species name three words, \"species\" otherwise.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clean_occ_fossil.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","text":"function performs following data cleaning flagging steps: Subsets standardizes column names Converts Max.age Min.age numeric (removing non-numeric values) Calculates midpoint ages: (Max.age + Min.age) / 2 Calculates age uncertainties: Max.age - Min.age Flags records age.range >= thresh.age.range Optionally computes species temporal ranges (TS TE) Optionally identifies subspecies-level records Removes records NA values TS TE (warning) Age uncertainty considerations: Purpose: Large age ranges indicate temporal imprecision Threshold: User-defined via thresh.age.range Action: Records flagged removed, allowing users decide handle downstream analyses Typical thresholds: 5-10 Ma Cenozoic studies, 10-20 Ma Mesozoic studies Subspecies identification: Uses word count species names (binomial = 2 words, trinomial >= 3 words) May require manual verification valid species names multiple words (e.g., \"Genus species complex\") Useful standardizing taxonomic resolution analyses Missing value handling: Non-numeric age values converted NA Records NA TS TE removed (comp.TS.TE = TRUE) warning issued NAs found removed","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/clean_occ_fossil.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean and Flag Fossil Occurrence Records Based on Multiple Criteria — clean_occ_fossil","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil occurrence data df_fossils <- data.frame(   species = c(\"Genus species\", \"Genus species subspecies\", \"Genus other\"),   Maximum_Age = c(100, 95, 90),   Minimum_Age = c(85, 80, 88),   lat = c(10, 15, 20),   lng = c(-50, -55, -60),   site = c(\"A\", \"B\", \"C\"),   group = c(\"G1\", \"G1\", \"G2\"),   trait = c(1.2, 2.5, 3.1) )  # Basic cleaning with default settings cleaned_data <- clean_occ_fossil(df.occ.fossil = df_fossils) head(cleaned_data)  # View flagged records with large age uncertainties flagged <- subset(cleaned_data, flag.age.range == \"TRUE\") flagged  # Identify subspecies-level records subspecies_records <- subset(cleaned_data, subspecies == \"subspecies\") subspecies_records  # Use a more stringent age uncertainty threshold cleaned_strict <- clean_occ_fossil(   df.occ.fossil = df_fossils,   thresh.age.range = 5 )  # Clean without computing TS and TE cleaned_no_ranges <- clean_occ_fossil(   df.occ.fossil = df_fossils,   comp.TS.TE = FALSE )  # Clean without flagging subspecies cleaned_all_taxa <- clean_occ_fossil(   df.occ.fossil = df_fossils,   remove.sub.species = FALSE )  # Use custom column names df_custom <- data.frame(   taxon = c(\"sp1\", \"sp2\", \"sp3\"),   oldest = c(100, 95, 90),   youngest = c(85, 80, 75) )  cleaned_custom <- clean_occ_fossil(   df.occ.fossil = df_custom,   species = \"taxon\",   Max.age = \"oldest\",   Min.age = \"youngest\" )  # Filter out flagged records for downstream analysis library(dplyr) reliable_records <- cleaned_data %>%   filter(flag.age.range == \"FALSE\")  # Summary of data quality quality_summary <- cleaned_data %>%   group_by(flag.age.range) %>%   summarise(     n_records = n(),     mean_age_range = mean(age.range),     n_species = n_distinct(species)   ) quality_summary } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_cooccurr.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","title":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","text":"auxiliary function computes species--species co-occurrence matrices time slice based shared site occupancy. Two species considered co-occur found site time slice. resulting matrices quantify many sites pair species shares, can used calculate trait distances among co-occurring species.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_cooccurr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","text":"","code":"comp_site_cooccurr(   spp_slice,   df.occ,   species = \"species\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_cooccurr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","text":"spp_slice named list element contains character vector species names present given time slice. Names list elements time slice identifiers (typically numeric values). Usually generated calc_spp_slice(). df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. Column names match parameters . species Character. name column df.occ containing species identifiers. Default \"species\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". site Character. name column df.occ containing site location identifiers. Default \"site\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_cooccurr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","text":"list length equal number time slices spp_slice. element square matrix (species × species) : Row column names species names Diagonal elements represent number sites species occurs -diagonal elements represent number shared sites pairs species Values 0 indicate site overlap species pairs","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_cooccurr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","text":"function performs following steps time slice: Filters df.occ include species present time slice filters occurrences age range overlaps time slice (Max.age >= time slice Min.age <= time slice) Removes duplicate species records within sites Creates site--species presence/absence matrix Computes cross-product (t(matrix) \\ species--species co-occurrence matrix resulting co-occurrence matrix quantifies spatial overlap: Diagonal values = total number sites occupied species -diagonal values = number sites shared species pairs differs simple presence/absence (0/1) co-occurrence function typically used internally IndivSpec_site_distance() related functions determine species co-occur sites calculating trait-based community metrics.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_cooccurr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Species Co-occurrence Matrices Based on Site Overlap Across Time Slices — comp_site_cooccurr","text":"","code":"if (FALSE) { # \\dontrun{ # Create example species composition per time slice spp_slice <- list(   \"100\" = c(\"sp1\", \"sp2\", \"sp3\"),   \"90\" = c(\"sp1\", \"sp2\", \"sp4\"),   \"80\" = c(\"sp2\", \"sp3\", \"sp4\") )  # Create example occurrence data df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp1\", \"sp2\", \"sp2\", \"sp3\", \"sp3\", \"sp4\"),   Max.age = c(100, 100, 95, 100, 90, 95, 95, 85),   Min.age = c(90, 90, 85, 80, 75, 80, 85, 70),   site = c(\"site1\", \"site2\", \"site3\", \"site1\", \"site2\", \"site1\", \"site3\", \"site2\") )  # Generate co-occurrence matrices for each time slice cooccur_matrices <- comp_site_cooccurr(   spp_slice = spp_slice,   df.occ = df_occurrences )  # View first time slice co-occurrence matrix cooccur_matrices[[1]]  # Convert to binary co-occurrence (present/absent) binary_cooccur <- ifelse(cooccur_matrices[[1]] >= 1, 1, 0)  # Calculate co-occurrence frequency for a species pair shared_sites_sp1_sp2 <- cooccur_matrices[[1]][\"sp1\", \"sp2\"]  } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_occurrence.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","title":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","text":"auxiliary function determines species occur sites within time slice, creating presence/absence matrices fossil assemblages. filters occurrence records based temporal overlap time slices generates site--species matrices can used downstream community ecology analyses.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_occurrence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","text":"","code":"comp_site_occurrence(   spp_slice,   df.occ,   species = \"species\",   Max.age = \"Max.age\",   Min.age = \"Min.age\",   site = \"site\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_occurrence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","text":"spp_slice named list element contains character vector species names present given time slice. Names list elements time slice identifiers (typically numeric values). Usually generated calc_spp_slice(). df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. species Character. name column df.occ containing species identifiers. Default \"species\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\". site Character. name column df.occ containing site location identifiers. Default \"site\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_occurrence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","text":"list length equal number time slices spp_slice. element data frame wide format representing site--species presence/absence matrix, following structure: First column: site - Site identifiers Subsequent columns: Species names column headers, values 1 (present) 0 (absent) indicating occurrence site","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_occurrence.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","text":"function performs following steps time slice: Filters df.occ include species present time slice (based spp_slice) filters occurrences age range overlaps time slice (Max.age >= time slice Min.age <= time slice) Groups occurrences site removes duplicate species records Creates presence/absence matrix sites rows species columns Returns matrix wide format suitable community ecology analyses function typically used internally prepare occurrence data calculating co-occurrence patterns, trait distances, community-level metrics site scale.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_site_occurrence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Site-Based Species Occurrence Across Time Slices — comp_site_occurrence","text":"","code":"if (FALSE) { # \\dontrun{ # Create example species composition per time slice spp_slice <- list(   \"100\" = c(\"sp1\", \"sp2\", \"sp3\"),   \"90\" = c(\"sp1\", \"sp2\", \"sp4\"),   \"80\" = c(\"sp2\", \"sp3\", \"sp4\") )  # Create example occurrence data df_occurrences <- data.frame(   species = c(\"sp1\", \"sp1\", \"sp2\", \"sp2\", \"sp3\", \"sp4\"),   Max.age = c(100, 95, 100, 90, 95, 85),   Min.age = c(90, 85, 80, 75, 80, 70),   site = c(\"site1\", \"site2\", \"site1\", \"site2\", \"site1\", \"site2\") )  # Generate site occurrence matrices for each time slice site_matrices <- comp_site_occurrence(   spp_slice = spp_slice,   df.occ = df_occurrences )  # View first time slice matrix site_matrices[[1]]  # Convert to traditional matrix format for analysis mat_slice1 <- as.matrix(site_matrices[[1]][, -1]) rownames(mat_slice1) <- site_matrices[[1]]$site  # Calculate species richness per site richness_per_site <- rowSums(mat_slice1)  # Calculate beta diversity between sites library(vegan) beta_div <- vegdist(mat_slice1, method = \"jaccard\") } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_slice_occ_cooccurr.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species Co-occurrence Matrices Based on Time Slice Overlap — comp_slice_occ_cooccurr","title":"Calculate Species Co-occurrence Matrices Based on Time Slice Overlap — comp_slice_occ_cooccurr","text":"auxiliary function computes species--species co-occurrence matrices time slice based shared site occupancy. Two species considered co-occur found site time slice. resulting matrices quantify many sites pair species shares, can used calculate trait distances among co-occurring species.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_slice_occ_cooccurr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species Co-occurrence Matrices Based on Time Slice Overlap — comp_slice_occ_cooccurr","text":"","code":"comp_slice_occ_cooccurr(   spp_slice,   df.occ,   species = \"species\",   Max.age = \"Max.age\",   Min.age = \"Min.age\" )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_slice_occ_cooccurr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species Co-occurrence Matrices Based on Time Slice Overlap — comp_slice_occ_cooccurr","text":"spp_slice named list element contains character vector species names present given time slice. Names list elements time slice identifiers (typically numeric values). Usually generated calc_spp_slice(). df.occ data frame containing fossil occurrence records least four columns: species names, minimum age, maximum age, site location ID. row represents single occurrence record specific site. Column names match parameters . species Character. name column df.occ containing species identifiers. Default \"species\". Max.age Character. name column df.occ containing maximum (oldest) age estimate occurrence record. Default \"Max.age\". Min.age Character. name column df.occ containing minimum (youngest) age estimate occurrence record. Default \"Min.age\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/comp_slice_occ_cooccurr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species Co-occurrence Matrices Based on Time Slice Overlap — comp_slice_occ_cooccurr","text":"list length equal number time slices spp_slice. element square matrix (species × species) : Row column names species names Diagonal elements represent number sites species occurs -diagonal elements represent number shared sites pairs species Values 0 indicate site overlap species pairs","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","title":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","text":"function calculates summary statistics fossil occurrence records grouped discrete time intervals (bins). time interval, computes number occurrence records number unique species (taxonomic richness). function bins occurrences based age estimates provides record-level species-level summaries.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","text":"","code":"get_summary_interval(   df.occ.fossil,   interval,   age.occ = \"midpoint\",   species = \"species\",   Max.age = \"Maximum_Age\",   Min.age = \"Minimum_Age\",   TS = NULL,   TE = NULL,   lat = NULL,   lng = NULL,   site = NULL,   group = NULL,   trait = NULL,   ... )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_interval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","text":"df.occ.fossil data frame containing fossil occurrence records columns species names, age estimates (maximum minimum ages, midpoint), optionally spatial coordinates, site information, group assignments, trait values. interval Numeric vector. sequence time bin boundaries descending order (oldest youngest). example, c(100, 90, 80, 70) creates three time bins: 100-90, 90-80, 80-70. Must least two elements. age.occ Character. name column df.occ.fossil containing age estimate used binning occurrences. Typically \"midpoint\" midpoint maximum minimum ages. Default \"midpoint\". species Character. name column df.occ.fossil containing species identifiers. Default \"species\". Max.age Character. name column df.occ.fossil containing maximum (oldest) age estimate occurrence record. Default \"Maximum_Age\". Min.age Character. name column df.occ.fossil containing minimum (youngest) age estimate occurrence record. Default \"Minimum_Age\". TS Character. name column containing origination (first appearance) times. Default NULL. parameter retained future functionality currently used calculations. TE Character. name column containing extinction (last appearance) times. Default NULL. parameter retained future functionality currently used calculations. lat Character. name column containing latitude coordinates. Default NULL. provided, latitude information retained output. lng Character. name column containing longitude coordinates. Default NULL. provided, longitude information retained output. site Character. name column containing site location identifiers. Default NULL. provided, site information retained output. group Character. name column containing group assignments species (e.g., clade, family). Default NULL. provided, group information retained output. trait Character. name column containing trait values species. Default NULL. provided, trait information retained output. ... Additional arguments (currently used reserved future extensions).","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_interval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","text":"list containing two data frames: df_summary_occurrences data frame occurrence records augmented two columns: time.interval: Character. time bin identifier (e.g., \"100-90\") n.records.bin: Integer. total number occurrence records time interval data frame one row per occurrence record. df_summary_richness data frame unique species per time interval augmented two columns: time.interval: Character. time bin identifier n.species.bin: Integer. number unique species (taxonomic richness) time interval data frame one row per unique species per time interval.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_interval.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","text":"function performs following steps: Validates input data frame Extracts specified columns occurrence data time interval (consecutive pairs interval): Filters occurrences age.occ falls within interval Assigns time interval label (e.g., \"100-90\") Calculates summary statistics: n.records.bin: Total number occurrences per interval n.species.bin: Number unique species per interval Binning logic: occurrence assigned interval : interval[] >= age.occ >= interval[+1] Intervals labeled using format \"upper-lower\" (e.g., \"100-90\") Occurrences falling outside intervals excluded two output data frames serve different purposes: df_summary_occurrences: Retains individual occurrence records detailed analyses (e.g., spatial patterns, within-interval variation) df_summary_richness: Provides species-level summaries diversity analyses (e.g., richness time, turnover rates)","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_interval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Summary Statistics from Fossil Records Across Time Intervals — get_summary_interval","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil occurrence data df_fossils <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp1\", \"sp2\", \"sp4\"),   midpoint = c(95, 92, 88, 85, 82, 78),   Maximum_Age = c(100, 95, 90, 90, 85, 80),   Minimum_Age = c(90, 89, 86, 80, 79, 76),   lat = c(10, 15, 20, 25, 30, 35),   lng = c(-50, -55, -60, -65, -70, -75),   site = c(\"A\", \"B\", \"C\", \"A\", \"B\", \"C\"),   group = c(\"G1\", \"G1\", \"G2\", \"G1\", \"G1\", \"G2\"),   trait = c(1.2, 2.5, 3.1, 1.2, 2.5, 4.0) )  # Define time intervals time_bins <- c(100, 90, 80, 70)  # Get summary statistics results <- get_summary_interval(   df.occ.fossil = df_fossils,   interval = time_bins,   age.occ = \"midpoint\" )  # View occurrence-level summary head(results$df_summary_occurrences)  # View species-level summary (richness) head(results$df_summary_richness)  # Plot richness through time library(ggplot2) richness_summary <- results$df_summary_richness %>%   group_by(time.interval) %>%   summarise(richness = first(n.species.bin))  ggplot(richness_summary, aes(x = time.interval, y = richness)) +   geom_col() +   labs(x = \"Time Interval\", y = \"Species Richness\") +   theme_minimal()  # Calculate sampling intensity (records per species) sampling_summary <- results$df_summary_occurrences %>%   group_by(time.interval) %>%   summarise(     total_records = first(n.records.bin),     n_species = n_distinct(species),     records_per_species = total_records / n_species   )  # Use custom column names df_custom <- data.frame(   taxon = c(\"sp1\", \"sp2\", \"sp3\"),   age = c(95, 85, 75),   oldest = c(100, 90, 80),   youngest = c(90, 80, 70) )  results_custom <- get_summary_interval(   df.occ.fossil = df_custom,   interval = c(100, 90, 80, 70),   age.occ = \"age\",   species = \"taxon\",   Max.age = \"oldest\",   Min.age = \"youngest\" ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_slices.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Summary Information for Species Across Time Slices — get_summary_slices","title":"Get Summary Information for Species Across Time Slices — get_summary_slices","text":"function processes fossil occurrence data generate summaries across discrete time slices. calculates species temporal ranges (origination extinction times) occurrence records, identifies species present time slice, counts occurrence records per species, creates species--species co-occurrence matrices. function also flags occurrences large age uncertainties based user-defined threshold.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_slices.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Summary Information for Species Across Time Slices — get_summary_slices","text":"","code":"get_summary_slices(   df.TS.TE,   timeframe,   method.ages = c(\"midpoint\", \"upper\", \"lower\"),   thresh.age.range = 10,   species = \"species\",   Max.age = \"Maximum_Age\",   Min.age = \"Minimum_Age\",   TS = NULL,   TE = NULL,   lat = NULL,   lng = NULL,   site = NULL,   group = NULL,   trait = NULL,   ... )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_slices.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Summary Information for Species Across Time Slices — get_summary_slices","text":"df.TS.TE data frame containing fossil occurrence records least three columns: species names, maximum (oldest) age estimates, minimum (youngest) age estimates. Additional columns may include spatial coordinates, site information, group assignments, trait values. timeframe Numeric. time interval (millions years appropriate time units) consecutive time slices. Negative values create backwards intervals oldest youngest occurrences. method.ages Character. method used estimate species ages occurrence records. Options include: \"midpoint\" (default): Use midpoint max min ages \"upper\": Use maximum (oldest) age \"lower\": Use minimum (youngest) age thresh.age.range Numeric. threshold flagging occurrence records large age uncertainties. Records age ranges (Max.age - Min.age) greater equal value flagged. Default 10. species Character. name column df.TS.TE containing species identifiers. Default \"species\". Max.age Character. name column df.TS.TE containing maximum (oldest) age estimate occurrence record. Default \"Maximum_Age\". Min.age Character. name column df.TS.TE containing minimum (youngest) age estimate occurrence record. Default \"Minimum_Age\". TS Character. name column containing origination (first appearance) times. Default NULL. NULL, TS calculated maximum midpoint age species. TE Character. name column containing extinction (last appearance) times. Default NULL. NULL, TE calculated minimum midpoint age species. lat Character. name column containing latitude coordinates. Default NULL. provided, latitude information retained output. lng Character. name column containing longitude coordinates. Default NULL. provided, longitude information retained output. site Character. name column containing site location identifiers. Default NULL. provided, site information retained output. group Character. name column containing group assignments species (e.g., clade, family). Default NULL. provided, group information retained output. trait Character. name column containing trait values species. Default NULL. provided, trait information retained output. ... Additional arguments (currently used reserved future extensions).","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_slices.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Summary Information for Species Across Time Slices — get_summary_slices","text":"list containing two elements: df_sub_bin named list data frames, one time slice. data frame contains occurrence records present slice, added columns: midpoint: Numeric. midpoint age occurrence age.range: Numeric. age uncertainty (Max.age - Min.age) flag.age.range: Character. \"TRUE\" age.range >= thresh.age.range, \"FALSE\" otherwise TS: Numeric. Species origination time (maximum midpoint) TE: Numeric. Species extinction time (minimum midpoint) count_records: Integer. Number occurrence records species time slice List names follow format \"slice_X\" X time slice value. coex_matrix named list binary co-occurrence matrices, one time slice. matrix: dimensions: n × n, n = total number unique species dataset Contains 1 species present time slice, 0 absent row column names species identifiers List names follow format \"slice_X\".","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_slices.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get Summary Information for Species Across Time Slices — get_summary_slices","text":"function performs following steps: Validates input data structure (must data frame) Calculates midpoint ages occurrence: (Max.age + Min.age) / 2 Calculates age uncertainties: Max.age - Min.age Flags occurrences age uncertainties >= thresh.age.range Computes species temporal ranges (TS TE) occurrence midpoints Creates time slices oldest youngest occurrence time slice, identifies species present (TS >= slice TE <= slice) Counts occurrence records per species per time slice Generates binary co-occurrence matrices time slice Age uncertainty handling: flag.age.range: Identifies potentially problematic occurrences large temporal uncertainties Threshold: Adjustable via thresh.age.range parameter Use case: Helps assess data quality decide whether filter weight occurrences differently Missing value handling: NA values TS TE columns trigger warning removed Non-numeric TS TE values trigger error function useful preparing fossil occurrence data downstream analyses diversity dynamics, trait evolution, biogeographic patterns time.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/get_summary_slices.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Summary Information for Species Across Time Slices — get_summary_slices","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil occurrence data df_fossils <- data.frame(   species = c(\"sp1\", \"sp2\", \"sp3\", \"sp1\", \"sp2\", \"sp4\"),   Maximum_Age = c(100, 95, 90, 88, 85, 80),   Minimum_Age = c(95, 90, 85, 83, 80, 75),   lat = c(10, 15, 20, 12, 18, 25),   lng = c(-50, -55, -60, -52, -57, -65),   site = c(\"A\", \"B\", \"C\", \"A\", \"B\", \"D\"),   group = c(\"G1\", \"G1\", \"G2\", \"G1\", \"G1\", \"G2\"),   trait = c(1.2, 2.5, 3.1, 1.2, 2.5, 4.0) )  # Get summary for 5 Ma time slices results <- get_summary_slices(   df.TS.TE = df_fossils,   timeframe = 5,   thresh.age.range = 10 )  # View occurrences in the first time slice head(results$df_sub_bin[[1]])  # View co-occurrence matrix for the first time slice results$coex_matrix[[1]]  # Count species richness per time slice richness_per_slice <- sapply(results$df_sub_bin, function(df) {   length(unique(df$species)) }) richness_per_slice  # Count total occurrences per time slice records_per_slice <- sapply(results$df_sub_bin, nrow) records_per_slice  # Identify occurrences with large age uncertainties flagged_occurrences <- do.call(rbind, results$df_sub_bin) %>%   filter(flag.age.range == \"TRUE\") head(flagged_occurrences)  # Calculate sampling intensity through time sampling_intensity <- data.frame(   slice = names(results$df_sub_bin),   n_records = records_per_slice,   n_species = richness_per_slice,   records_per_species = records_per_slice / richness_per_slice )  # Plot richness through time library(ggplot2) ggplot(sampling_intensity, aes(x = slice, y = n_species)) +   geom_col() +   labs(x = \"Time Slice\", y = \"Species Richness\") +   theme_minimal() +   theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Use custom age method and threshold results_upper <- get_summary_slices(   df.TS.TE = df_fossils,   timeframe = 5,   method.ages = \"upper\",   thresh.age.range = 5 ) } # }"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/plot_occ_bins.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","title":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","text":"function creates visualization fossil occurrence records showing temporal distribution species across geological time. species represented horizontal line segments spanning maximum (oldest) minimum (youngest) ages occurrence record. plot can optionally color-code species number occurrences overlay geological time scale boundaries.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/plot_occ_bins.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","text":"","code":"plot_occ_bins(   df.occ.fossil,   species = \"accepted_name\",   max.age = \"max_ma\",   min.age = \"min_ma\",   occ.gradient = TRUE,   log = TRUE,   name.scale.occ = \"viridis\",   x.axis.name = \"age range\",   y.axis.name = \"species.name\",   show.species.name = FALSE,   age.scheme = TRUE )"},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/plot_occ_bins.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","text":"df.occ.fossil data frame containing fossil occurrence records least three columns: species names, maximum (oldest) age estimates, minimum (youngest) age estimates. row represents single occurrence record age uncertainty. species Character. name column df.occ.fossil containing species identifiers. Default \"accepted_name\". max.age Character. name column df.occ.fossil containing maximum (oldest) age estimate occurrence record. Default \"max_ma\". min.age Character. name column df.occ.fossil containing minimum (youngest) age estimate occurrence record. Default \"min_ma\". occ.gradient Logical. line segments colored number occurrences species? TRUE (default), species occurrence records different colors based chosen color scale. log Logical. number occurrences log-transformed color scaling? Default TRUE. can help visualize species highly variable occurrence counts. name.scale.occ Character. name viridis color scale use coloring occurrence count. Options include \"viridis\" (default), \"magma\", \"plasma\", \"inferno\", \"cividis\", \"mako\", \"rocket\", \"turbo\". x.axis.name Character. Label x-axis. Default \"age range\". y.axis.name Character. Label y-axis. Default \"species.name\". show.species.name Logical. species names displayed y-axis? Default FALSE. FALSE, y-axis labels hidden reduce clutter plotting many species. age.scheme Logical. geological time period boundaries overlaid vertical dashed lines? Default TRUE. Currently uses North American Land Mammal Ages (NALMAs) boundaries.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/plot_occ_bins.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","text":"ggplot2 object displaying occurrence records. Species arranged vertically (y-axis) sorted maximum age, time (age) reversed x-axis (oldest left, youngest right). horizontal segment represents one occurrence record spanning age uncertainty.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/plot_occ_bins.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","text":"function performs following visualization steps: Orders species oldest occurrence (maximum age) Counts number occurrence records per species Optionally log-transforms occurrence counts better visualization Creates horizontal segments occurrence spanning min max age Colors segments occurrence count using viridis color scales Optionally overlays geological time boundaries Visualization features: X-axis: Time millions years (Ma), reversed older ages appear left Y-axis: Species names (ordered first appearance) Color gradient: Number occurrences per species (without log transformation) Vertical lines: Geological time period boundaries (enabled) default geological time scheme uses North American Land Mammal Ages (NALMAs) boundaries. use custom time boundaries, set age.scheme = FALSE modify returned ggplot object.","code":""},{"path":"https://gabrielnakamura.github.io/Buccaneer/reference/plot_occ_bins.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Fossil Occurrence Records and Species Age Ranges — plot_occ_bins","text":"","code":"if (FALSE) { # \\dontrun{ # Create example fossil occurrence data df_fossils <- data.frame(   accepted_name = rep(c(\"sp1\", \"sp2\", \"sp3\"), each = 3),   max_ma = c(100, 95, 90, 85, 80, 75, 70, 65, 60),   min_ma = c(95, 90, 85, 80, 75, 70, 65, 60, 55) )  # Basic plot with default settings plot_occ_bins(df.occ.fossil = df_fossils)  # Plot with species names visible plot_occ_bins(   df.occ.fossil = df_fossils,   show.species.name = TRUE )  # Plot without log transformation of occurrence counts plot_occ_bins(   df.occ.fossil = df_fossils,   log = FALSE )  # Plot without geological time boundaries plot_occ_bins(   df.occ.fossil = df_fossils,   age.scheme = FALSE )  # Use different color scale plot_occ_bins(   df.occ.fossil = df_fossils,   name.scale.occ = \"plasma\" )  # Customize the plot further p <- plot_occ_bins(df.occ.fossil = df_fossils) p +   ggplot2::labs(title = \"Fossil Occurrences Through Time\") +   ggplot2::theme_minimal()  # Use custom column names df_custom <- data.frame(   taxon = rep(c(\"sp1\", \"sp2\"), each = 2),   oldest = c(100, 95, 90, 85),   youngest = c(95, 90, 85, 80) )  plot_occ_bins(   df.occ.fossil = df_custom,   species = \"taxon\",   max.age = \"oldest\",   min.age = \"youngest\" ) } # }"}]
